!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="/assets/",e(0)}([function(t,e,n){n(1),n(7),n(10),n(12),n(13),n(14),n(15),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27)},function(t,e,n){var o,r,u,i,a,c,d,l,s,f;s=n(2),i=s.expect,c=s.iit,a=s.idescribe,l=s.nit,d=s.ndescribe,u=s.ddescribe,f=n(4),r=f.binarySearch,o=f.binaryInsert,describe("util",function(){return describe("binarySearch",function(){return it("should binarySearch(0, [])",function(){return i(r(0,[])).to.deep.equal(0)}),it("should binarySearch(0, [0])",function(){return i(r(0,[0])).to.deep.equal(0)}),it("should binarySearch(0, [1])",function(){return i(r(0,[1])).to.deep.equal(0)}),it("should binarySearch(1, [1 2])",function(){return i(r(1,[1,2])).to.deep.equal(0)}),it("should binarySearch(2, [1 2])",function(){return i(r(2,[1,2])).to.deep.equal(1)}),it("should binarySearch(2, [1 3])",function(){return i(r(2,[1,3])).to.deep.equal(1)}),it("should binarySearch(2, [1 2 3])",function(){return i(r(2,[1,2,3])).to.deep.equal(1)}),it("should binarySearch(2, [1 2 3 4])",function(){return i(r(2,[1,2,3,4])).to.deep.equal(1)}),it("should binarySearch(2, [1 2 4 5])",function(){return i(r(3,[1,2,4,5])).to.deep.equal(2)}),it("should binarySearch(2, [1 2 4 5])",function(){return i(r(4,[1,2,4,5])).to.deep.equal(2)}),it("should binarySearch(2, [1 2 4 5 6])",function(){return i(r(4,[1,2,4,5,6])).to.deep.equal(2)})}),describe("binaryInsert",function(){return it("should binaryInsert(0, [])",function(){var t;return o(0,t=[]),i(t).to.deep.equal([0])}),it("should binaryInsert(0, [0])",function(){var t;return o(0,t=[0]),i(t).to.deep.equal([0])}),it("should binaryInsert(0, [1])",function(){var t;return o(0,t=[1]),i(t).to.deep.equal([0,1])}),it("should binaryInsert(1, [1 2])",function(){var t;return o(1,t=[1,2]),i(t).to.deep.equal([1,2])}),it("should binaryInsert(2, [1 2])",function(){var t;return o(2,t=[1,2]),i(t).to.deep.equal([1,2])}),it("should binaryInsert(2, [1 3])",function(){var t;return o(2,t=[1,3]),i(t).to.deep.equal([1,2,3])}),it("should binaryInsert(2, [1 2 3])",function(){var t;return o(2,t=[1,2,3]),i(t).to.deep.equal([1,2,3])}),it("should binaryInsert(2, [1 2 3 4])",function(){var t;return o(2,t=[1,2,3,4]),i(t).to.deep.equal([1,2,3,4])}),it("should binaryInsert(2, [1 2 4 5])",function(){var t;return o(3,t=[1,2,4,5]),i(t).to.deep.equal([1,2,3,4,5])}),it("should binaryInsert(2, [1 2 4 5])",function(){var t;return o(4,t=[1,2,4,5]),i(t).to.deep.equal([1,2,4,5])}),it("should binaryInsert(2, [1 2 4 5 6])",function(){var t;return o(4,t=[1,2,4,5,6]),i(t).to.deep.equal([1,2,4,5,6])})})})},function(t,e,n){var o;o="undefined"==typeof window?n(3):window.chai,e.expect=o.expect,e.iit=it.only,e.idescribe=describe.only,e.nit=function(){},e.ndescribe=function(){},e.ddescribe=function(t,e){return e()}},function(t,e){t.exports=chai},function(t,e,n){var o,r,u,i=[].slice;e.isArray=u=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.cloneObject=function(t){var e,n;n={};for(e in t)n[e]=t[e];return n},e.pairListDict=function(){var t,e,n,o;for(e=1<=arguments.length?i.call(arguments,0):[],1===e.length&&(e=e[0]),n=e.length,t=0,o={};n>t;)o[e[t]]=e[t+1],t+=2;return o},o=function(t,e){var n,o;for(o="",n=0;n++<e;)o+=t;return o},e.newLine=function(t,e,n){return n?"\n"+o(" ",e)+t:t},e.funcString=function(t){var e,n;if("function"!=typeof t){if(null==t)return"null";if(t.getBaseComponent)return t.toString();try{return JSON.stringify(t)}catch(o){return e=o,t.toString()}}return n=t.toString(),t.invalidate?n:(n="function (){"===n.slice(0,12)?n.slice(12,n.length-1):"function () {"===n.slice(0,13)?n.slice(13,n.length-1):n.slice(9),n=n.trim(),"return "===n.slice(0,7)&&(n=n.slice(7)),";"===n[n.length-1]&&(n=n.slice(0,n.length-1)),"fn:"+n)},r=1,e.newDcid=function(){return r++},e.isEven=function(t){for(0>t&&(t=-t);t>0;)t-=2;return 0===t},e.matchCurvedString=function(t,e){var n,o;if("("===t[e])for(o=0;n=t[++e];)if("\\"===n){if(!(n=t[++e]))return}else if("("===n)o++;else if(")"===n){if(0===o)return++e;o--}},e.intersect=function(t){var e,n,o,r,u,i,a,c;u={},o=t[0];for(n in o){for(e=!0,c=t.slice(1),i=0,a=c.length;a>i;i++)if(r=c[i],!r[n]){e=!1;break}e&&(u[n]=o[n])}return u},e.substractSet=function(t,e){var n;for(n in e)delete t[n];return t},e.binarySearch=function(t,e){var n,o,r,u;if(r=e.length,!r)return 0;if(1===r)return e[0]>=t?0:1;for(u=0,n=r-1;;){if(o=u+Math.floor((n-u)/2),u===n)return e[o]>=t?o:o+1;if(t===e[o])return o;if(t===e[o+1])return o+1;if(t<e[o])n=o;else{if(!(t>e[o+1]))return o+1;u=o+1}}},e.binaryInsert=function(t,e){var n,o,r,u;if(r=e.length,!r)return e[0]=t,0;if(1===r)return e[0]===t?0:e[0]>t?(e[1]=e[0],e[0]=t,0):(e[1]=t,1);for(u=0,n=r-1;;){if(o=u+Math.floor((n-u)/2),u===n)return e[o]===t?o:e[o]>t?(e.splice(o,0,t),o):(e.splice(o+1,0,t),o+1);if(t===e[o])return o;if(t===e[o+1])return o+1;if(t<e[o])n=o;else{if(!(t>e[o+1]))return e.splice(o+1,0,t),o+1;u=o+1}}},e.numbers=function(t){var e,o,r;if(e=n(5),"function"==typeof t)return e(t,function(){var e,n,o;for(e=0,o=[],n=t();n>e;)o.push(e),e++;return o});for(o=0,r=[];t>o;)r.push(o),o++;return r},e.foreach=function(t,e){var n,o,r,i,a,c;if(t){if(u(t))for(i=[],n=a=0,c=t.length;c>a;n=++a)o=t[n],i.push(e(o,n));else{i={};for(r in t)o=t[r],i[r]=e(o,r)}return i}}},function(t,e,n){var o,r,u,i,a,c,d,l,s=[].slice;l=n(6),i=l.newLine,u=l.funcString,a=function(t){return t.invalidate?t:(t.valid=!1,t.invalidateCallbacks=[],t.onInvalidate=function(e){var n;if("function"!=typeof e)throw new Error("call back should be a function");return n=t.invalidateCallbacks||(t.invalidateCallbacks=[]),n.push(e)},t.offInvalidate=function(e){var n,o;return o=t.invalidateCallbacks,!o||(n=o.indexOf(e),0>n)?void 0:(o.splice(n,1),o.length?void 0:t.invalidateCallbacks=null)},t.invalidate=function(){var e,n,o,r;if(t.valid&&t.invalidateCallbacks){for(r=t.invalidateCallbacks,n=0,o=r.length;o>n;n++)(e=r[n])();t.valid=!1}},t)},c=function(t){var e;return e=function(){var n;if(arguments.length)throw new Error("flow.renew is not allowed to accept arguments");return n=t(),e.valid=!0,e.invalidate(),n},e.toString=function(){return"renew: "+u(t)},a(e)},o=function(t){var e,n;return e=null,n=function(){if(arguments.length)throw new Error("flow.dependent is not allowed to accept arguments");return n.valid?e:(n.valid=!0,e=t())},n.toString=function(){return"dependent: "+u(t)},a(n)},t.exports=r=function(){var t,e,n,o,r,i,c,d,l,f;if(o=2<=arguments.length?s.call(arguments,0,i=arguments.length-1):(i=0,[]),e=arguments[i++],!o.length)return a(e);for(c=0,l=o.length;l>c;c++)if(n=o[c],"function"==typeof n&&!n.invalidate)return r=a(function(){return r.invalidate(),e()});for(t=null,r=a(function(n){return arguments.length?n===t?n:(t=e(n),r.invalidate(),t):r.valid?t:(r.valid=!0,t=e())}),d=0,f=o.length;f>d;d++)n=o[d],n&&n.onInvalidate&&n.onInvalidate(r.invalidate);return r.toString=function(){return"flow: ["+function(){var t,e,r;for(r=[],t=0,e=o.length;e>t;t++)n=o[t],r.push(n.toString());return r}().join(",")+"] --> "+u(e)},r},r.pipe=function(){var t,e,n,o,r,u,i,c,d;for(n=2<=arguments.length?s.call(arguments,0,r=arguments.length-1):(r=0,[]),t=arguments[r++],u=0,c=n.length;c>u;u++)if(e=n[u],"function"==typeof e&&!e.invalidate)return o=a(function(){var r,u,i;if(argumnets.length)throw new Error("flow.pipe is not allow to have arguments");for(o.invalidate(),r=[],u=0,i=n.length;i>u;u++)e=n[u],"function"==typeof e?r.push(e()):r.push(e);return t.apply(null,r)});for(o=a(function(){var o,r,u;for(o=[],r=0,u=n.length;u>r;r++)e=n[r],"function"==typeof e?o.push(e()):o.push(e);return t.apply(null,o)}),i=0,d=n.length;d>i;i++)e=n[i],e&&e.onInvalidate&&e.onInvalidate(o.invalidate);return o},r.react=a,r.renew=c,r.dependent=o,r.flow=r,r.see=d=function(t,e){var n,o;return n=t,o=function(t){return arguments.length?(t=e?e(t):t,t!==n&&(n=t,o.invalidate()),t):(o.valid=!0,n)},o.isDuplex=!0,o.toString=function(){return"see: "+t},a(o)},r.seeN=function(){var t,e,n,o,r;for(e=1<=arguments.length?s.call(arguments,0):[],r=[],n=0,o=e.length;o>n;n++)t=e[n],r.push(d(t));return r},Object.defineProperty?(r.bind=function(t,e,n){var o,r,u,i;return o=Object.getOwnPropertyDescriptor(t,e),o&&(r=o.get,u=o.set),r&&r.invalidate||(r=function(){if(arguments.length)throw new Error("should not set value on flow.bind");return r.valid=!0,r.cacheValue},r.cacheValue=t[e],i=function(n){return n!==t[e]?(u&&u(n),r.invalidate(),r.cacheValue=n):void 0},a(r),r.toString=function(){return""+(n||"m")+"["+e+"]"},Object.defineProperty(t,e,{get:r,set:i})),r},r.duplex=function(t,e,n){var o,r,u,i;return o=Object.getOwnPropertyDescriptor(t,e),o&&(r=o.get,i=o.set),i&&i.invalidate?i:(u=function(n){return arguments.length?n!==t[e]?(i&&i(n),r&&r.invalidate&&r.invalidate(),u.invalidate(),u.cacheValue=n):void 0:(u.valid=!0,u.cacheValue)},u.cacheValue=t[e],a(u),u.isDuplex=!0,u.toString=function(){return""+(n||"m")+"["+e+"]"},Object.defineProperty(t,e,{get:u,set:u}),u)}):(r.bind=function(t,e,n){var o,r;return r=t._dcBindMethodMap,r||(r=t._dcBindMethodMap={}),t.dcSet$||(t.dcSet$=function(e,n){var o;return n!==t[e]?(r&&r[e]&&r[e].invalidate(),(o=this._dcDuplexMethodMap)&&o[e]&&o[e].invalidate()):void 0}),o=r[e],o||(o=r[e]=function(){return o.valid=!0,t[e]},o.toString=function(){return""+(n||"m")+"["+e+"]"},a(o)),o},r.duplex=function(t,e,n){var o,r;return r=t._dcDuplexMethodMap,r||(r=t._dcDuplexMethodMap={}),t.dcSet$||(t.dcSet$=function(e,n){var o;return n!==t[e]&&((o=this._dcBindMethodMap)&&o[e]&&o[e].invalidate(),r&&r[e]&&r[e].invalidate()),n}),o=r[e],o||(o=r[e]=function(n){return arguments.length?t.dcSet$(e,n):(o.valid=!0,t[e])},o.isDuplex=!0,o.toString=function(){return""+(n||"m")+"["+e+"]"},a(o)),o}),r.unary=function(t,e){return"function"!=typeof t?e(t):t.invalidate?r(t,function(){return e(t())}):function(){return e(t())}},r.binary=function(t,e,n){return"function"==typeof t&&"function"==typeof e?t.invalidate&&e.invalidate?r(t,e,function(){return n(t(),e())}):function(){return n(t(),e())}:"function"==typeof t?t.invalidate?r(t,function(){return n(t(),e)}):function(){return n(t(),e)}:"function"==typeof e?e.invalidate?r(e,function(){return n(t,e())}):function(){return n(t,e())}:n(t,e)}},function(t,e,n){var o,r,u,i=[].slice;e.isArray=u=function(t){return"[object Array]"===Object.prototype.toString.call(t)},e.cloneObject=function(t){var e,n;n={};for(e in t)n[e]=t[e];return n},e.pairListDict=function(){var t,e,n,o;for(e=1<=arguments.length?i.call(arguments,0):[],1===e.length&&(e=e[0]),n=e.length,t=0,o={};n>t;)o[e[t]]=e[t+1],t+=2;return o},o=function(t,e){var n,o;for(o="",n=0;n++<e;)o+=t;return o},e.newLine=function(t,e,n){return n?"\n"+o(" ",e)+t:t},e.funcString=function(t){var e,n;if("function"!=typeof t){if(null==t)return"null";if(t.getBaseComponent)return t.toString();try{return JSON.stringify(t)}catch(o){return e=o,t.toString()}}return n=t.toString(),t.invalidate?n:(n="function (){"===n.slice(0,12)?n.slice(12,n.length-1):"function () {"===n.slice(0,13)?n.slice(13,n.length-1):n.slice(9),n=n.trim(),"return "===n.slice(0,7)&&(n=n.slice(7)),";"===n[n.length-1]&&(n=n.slice(0,n.length-1)),"fn:"+n)},r=1,e.newDcid=function(){return r++},e.isEven=function(t){for(0>t&&(t=-t);t>0;)t-=2;return 0===t},e.matchCurvedString=function(t,e){var n,o;if("("===t[e])for(o=0;n=t[++e];)if("\\"===n){if(!(n=t[++e]))return}else if("("===n)o++;else if(")"===n){if(0===o)return++e;o--}},e.intersect=function(t){var e,n,o,r,u,i,a,c;u={},o=t[0];for(n in o){for(e=!0,c=t.slice(1),i=0,a=c.length;a>i;i++)if(r=c[i],!r[n]){e=!1;break}e&&(u[n]=o[n])}return u},e.substractSet=function(t,e){var n;for(n in e)delete t[n];return t},e.binarySearch=function(t,e){var n,o,r,u;if(r=e.length,!r)return 0;if(1===r)return e[0]>=t?0:1;for(u=0,n=r-1;;){if(o=u+Math.floor((n-u)/2),u===n)return e[o]>=t?o:o+1;if(t===e[o])return o;if(t===e[o+1])return o+1;if(t<e[o])n=o;else{if(!(t>e[o+1]))return o+1;u=o+1}}},e.binaryInsert=function(t,e){var n,o,r,u;if(r=e.length,!r)return e[0]=t,0;if(1===r)return e[0]===t?0:e[0]>t?(e[1]=e[0],e[0]=t,0):(e[1]=t,1);for(u=0,n=r-1;;){if(o=u+Math.floor((n-u)/2),u===n)return e[o]===t?o:e[o]>t?(e.splice(o,0,t),o):(e.splice(o+1,0,t),o+1);if(t===e[o])return o;if(t===e[o+1])return o+1;if(t<e[o])n=o;else{if(!(t>e[o+1]))return e.splice(o+1,0,t),o+1;u=o+1}}},e.numbers=function(t){var e,o,r;if(e=n(5),"function"==typeof t)return e(t,function(){var e,n,o;for(e=0,o=[],n=t();n>e;)o.push(e),e++;return o});for(o=0,r=[];t>o;)r.push(o),o++;return r},e.foreach=function(t,e){var n,o,r,i,a,c;if(t){if(u(t))for(i=[],n=a=0,c=t.length;c>a;n=++a)o=t[n],i.push(e(o,n));else{i={};for(r in t)o=t[r],i[r]=e(o,r)}return i}}},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q;v=n(2),a=v.expect,l=v.iit,d=v.idescribe,f=v.nit,s=v.ndescribe,u=v.ddescribe,g=n(8),h=g.see,o=g.bind,i=g.duplex,p=g.renew,c=g.flow,q=n(9),r=q.bindings,m=q.seeAttrs,describe("reactive flow",function(){return it("should see",function(){var t;return t=h(1),a(t()).to.equal(1),a(t(2)).to.equal(2),a(t()).to.equal(2)}),it("should renew",function(){var t,e;return e=1,t=p(function(){return e},!0),a(t()).to.equal(1),a(function(){return t(2)}).to["throw"](),e=2,a(t()).to.equal(2)}),it("should flow",function(){var t,e,n;return t=h(1),e=h(2),n=c(t,e,function(){return t()+e()}),a(n()).to.equal(3),t(2),a(n()).to.equal(4)}),it("should flow unary",function(){var t,e,n,o;return o=r({a:4,b:2}),t=o.a_,e=o.b_,n=c.neg(t),a(n()).to.equal(-4,"neg"),n=c.no(t),a(n()).to.equal(!1,"not"),n=c.abs(c.neg(t)),a(n()).to.equal(4,"abs neg"),n=c.bitnot(t),a(n()).to.equal(-5,"bitnot")}),it("should flow binary",function(){var t,e,n,o;return o=r({a:4,b:2}),t=o.a_,e=o.b_,n=c.add(t,e),a(n()).to.equal(6,"add"),n=c.sub(t,e),a(n()).to.equal(2,"sub"),n=c.mul(t,e),a(n()).to.equal(8,"mul"),n=c.div(t,e),a(n()).to.equal(2,"div")}),it("should invalidate flow binary",function(){var t,e,n;return t=h(1),e=h(2),n=c.add(t,e),a(n()).to.equal(3,"add"),t(3),a(n()).to.equal(5,"add 2")}),it("should invalidate bind flow binary",function(){var t,e,n,r;return n={a:1,b:2},t=o(n,"a","m"),e=o(n,"b","m"),r=c.add(t,e),a(r()).to.equal(3,"add"),a(function(){return t(3)}).to["throw"](),a(r()).to.equal(3,"add 2")}),it("should bind",function(){var t,e,n;return n={a:1},t=o(n,"a"),e=o(n,"a"),a(t()).to.equal(1),a(e()).to.equal(1,"a2"),a(function(){return t(3)}).to["throw"](),a(t()).to.equal(1,"a again"),a(e()).to.equal(1,"a2 again")}),it("should process bindings",function(){var t,e,n;return n=r({a:1}),t=n.a$,e=n.a_,t(3),a(e()).to.equal(3)}),it("should process multiple bind and duplex on same object and attr",function(){var t,e,n,o,r,u;return r={a:1,b:2},t=i(r,"a"),n=i(r,"b"),e=i(r,"a"),o=i(r,"b"),u=c.add(t,n),a(u()).to.equal(3,"sum 1"),a(u.valid).to.equal(!0,"valid 1"),e(3),a(u.valid).to.equal(!1,"valid 2"),a(u()).to.equal(5,"sum 2"),u=c.add(e,o),a(u()).to.equal(5,"sum 3"),a(u.valid).to.equal(!0,"valid 3"),e(1),a(u.valid).to.equal(!1,"valid 4"),a(u()).to.equal(3,"sum 4")}),it("should seeAttrs",function(){var t,e;return t={},e={x:1},m(t,e),a(typeof t.x).to.equal("function"),a(t.x()).to.equal(1),e={x:2},m(t,e),a(typeof t.x).to.equal("function"),a(t.x()).to.equal(2)})})},function(t,e,n){var o,r,u,i,a,c,d,l,s=[].slice;l=n(6),i=l.newLine,u=l.funcString,a=function(t){return t.invalidate?t:(t.valid=!1,t.invalidateCallbacks=[],t.onInvalidate=function(e){var n;if("function"!=typeof e)throw new Error("call back should be a function");return n=t.invalidateCallbacks||(t.invalidateCallbacks=[]),n.push(e)},t.offInvalidate=function(e){var n,o;return o=t.invalidateCallbacks,!o||(n=o.indexOf(e),0>n)?void 0:(o.splice(n,1),o.length?void 0:t.invalidateCallbacks=null)},t.invalidate=function(){var e,n,o,r;if(t.valid&&t.invalidateCallbacks){for(r=t.invalidateCallbacks,n=0,o=r.length;o>n;n++)(e=r[n])();t.valid=!1}},t)},c=function(t){var e;return e=function(){var n;if(arguments.length)throw new Error("flow.renew is not allowed to accept arguments");return n=t(),e.valid=!0,e.invalidate(),n},e.toString=function(){return"renew: "+u(t)},a(e)},o=function(t){var e,n;return e=null,n=function(){if(arguments.length)throw new Error("flow.dependent is not allowed to accept arguments");return n.valid?e:(n.valid=!0,e=t())},n.toString=function(){return"dependent: "+u(t)},a(n)},t.exports=r=function(){var t,e,n,o,r,i,c,d,l,f;if(o=2<=arguments.length?s.call(arguments,0,i=arguments.length-1):(i=0,[]),e=arguments[i++],!o.length)return a(e);for(c=0,l=o.length;l>c;c++)if(n=o[c],"function"==typeof n&&!n.invalidate)return r=a(function(){return r.invalidate(),e()});for(t=null,r=a(function(n){return arguments.length?n===t?n:(t=e(n),r.invalidate(),t):r.valid?t:(r.valid=!0,t=e())}),d=0,f=o.length;f>d;d++)n=o[d],n&&n.onInvalidate&&n.onInvalidate(r.invalidate);return r.toString=function(){return"flow: ["+function(){var t,e,r;for(r=[],t=0,e=o.length;e>t;t++)n=o[t],r.push(n.toString());return r}().join(",")+"] --> "+u(e)},r},r.pipe=function(){var t,e,n,o,r,u,i,c,d;for(n=2<=arguments.length?s.call(arguments,0,r=arguments.length-1):(r=0,[]),t=arguments[r++],u=0,c=n.length;c>u;u++)if(e=n[u],"function"==typeof e&&!e.invalidate)return o=a(function(){var r,u,i;if(argumnets.length)throw new Error("flow.pipe is not allow to have arguments");for(o.invalidate(),r=[],u=0,i=n.length;i>u;u++)e=n[u],"function"==typeof e?r.push(e()):r.push(e);return t.apply(null,r)});for(o=a(function(){var o,r,u;for(o=[],r=0,u=n.length;u>r;r++)e=n[r],"function"==typeof e?o.push(e()):o.push(e);return t.apply(null,o)}),i=0,d=n.length;d>i;i++)e=n[i],e&&e.onInvalidate&&e.onInvalidate(o.invalidate);return o},r.react=a,r.renew=c,r.dependent=o,r.flow=r,r.see=d=function(t,e){var n,o;return n=t,o=function(t){return arguments.length?(t=e?e(t):t,t!==n&&(n=t,o.invalidate()),t):(o.valid=!0,n)},o.isDuplex=!0,o.toString=function(){return"see: "+t},a(o)},r.seeN=function(){var t,e,n,o,r;for(e=1<=arguments.length?s.call(arguments,0):[],r=[],n=0,o=e.length;o>n;n++)t=e[n],r.push(d(t));return r},Object.defineProperty?(r.bind=function(t,e,n){var o,r,u,i;return o=Object.getOwnPropertyDescriptor(t,e),o&&(r=o.get,u=o.set),r&&r.invalidate||(r=function(){if(arguments.length)throw new Error("should not set value on flow.bind");return r.valid=!0,r.cacheValue},r.cacheValue=t[e],i=function(n){return n!==t[e]?(u&&u(n),r.invalidate(),r.cacheValue=n):void 0},a(r),r.toString=function(){return""+(n||"m")+"["+e+"]"},Object.defineProperty(t,e,{get:r,set:i})),r},r.duplex=function(t,e,n){var o,r,u,i;return o=Object.getOwnPropertyDescriptor(t,e),o&&(r=o.get,i=o.set),i&&i.invalidate?i:(u=function(n){return arguments.length?n!==t[e]?(i&&i(n),r&&r.invalidate&&r.invalidate(),u.invalidate(),u.cacheValue=n):void 0:(u.valid=!0,u.cacheValue)},u.cacheValue=t[e],a(u),u.isDuplex=!0,u.toString=function(){return""+(n||"m")+"["+e+"]"},Object.defineProperty(t,e,{get:u,set:u}),u)}):(r.bind=function(t,e,n){var o,r;return r=t._dcBindMethodMap,r||(r=t._dcBindMethodMap={}),t.dcSet$||(t.dcSet$=function(e,n){var o;return n!==t[e]?(r&&r[e]&&r[e].invalidate(),(o=this._dcDuplexMethodMap)&&o[e]&&o[e].invalidate()):void 0}),o=r[e],o||(o=r[e]=function(){return o.valid=!0,t[e]},o.toString=function(){return""+(n||"m")+"["+e+"]"},a(o)),o},r.duplex=function(t,e,n){var o,r;return r=t._dcDuplexMethodMap,r||(r=t._dcDuplexMethodMap={}),t.dcSet$||(t.dcSet$=function(e,n){var o;return n!==t[e]&&((o=this._dcBindMethodMap)&&o[e]&&o[e].invalidate(),r&&r[e]&&r[e].invalidate()),n}),o=r[e],o||(o=r[e]=function(n){return arguments.length?t.dcSet$(e,n):(o.valid=!0,t[e])},o.isDuplex=!0,o.toString=function(){return""+(n||"m")+"["+e+"]"},a(o)),o}),r.unary=function(t,e){return"function"!=typeof t?e(t):t.invalidate?r(t,function(){return e(t())}):function(){return e(t())}},r.binary=function(t,e,n){return"function"==typeof t&&"function"==typeof e?t.invalidate&&e.invalidate?r(t,e,function(){return n(t(),e())}):function(){return n(t(),e())}:"function"==typeof t?t.invalidate?r(t,function(){return n(t(),e)}):function(){return n(t(),e)}:"function"==typeof e?e.invalidate?r(e,function(){return n(t,e())}):function(){return n(t,e())}:n(t,e)}},function(t,e,n){var o,r,u,i,a,c,d;d=n(8),a=d.see,r=d.bind,u=d.duplex,i=d.flow,c=d.unary,o=d.binary,t.exports=i,i.bindings=function(t,e){var n,o;o={};for(n in t)o[n+"$"]=u(t,n,e),o[n+"_"]=r(t,n,e);return o},i.seeAttrs=function(t,e){var n,o,r;for(o in e)r=e[o],n=t[o],"function"==typeof n?n(r):t[o]=a(r);return t},i.neg=function(t){return c(t,function(t){return-t})},i.no=i.not=i.not_=function(t){return c(t,function(t){return!t})},i.bitnot=function(t){return c(t,function(t){return~t})},i.reciprocal=function(t){return c(t,function(t){return 1/t})},i.abs=function(t){return c(t,Math.abs)},i.floor=function(t){return c(t,Math.floor)},i.ceil=function(t){return c(t,Math.ceil)},i.round=function(t){return c(t,Math.round)},i.add=function(t,e){return o(t,e,function(t,e){return t+e})},i.sub=function(t,e){return o(t,e,function(t,e){return t-e})},i.mul=function(t,e){return o(t,e,function(t,e){return t*e})},i.div=function(t,e){return o(t,e,function(t,e){return t/e})},i.min=function(t,e){return o(t,e,function(t,e){return Math.min(t,e)})},i.and=function(t,e){return o(t,e,function(t,e){return t&&e})},i.or=function(t,e){return o(t,e,function(t,e){return t||e})},i.funcAttr=function(t,e){return i(t,e,function(n){var o;return o=t(),null==o?o:arguments.length?o[e]=n:o[e]})},i.toggle=function(t){return t(!t())},i.if_=function(t,e,n){return"function"!=typeof t?t?e:n:t.invalidate?"function"==typeof e&&"function"==typeof n?e.invalidate&&n.invalidate?i(t,e,n,function(){return t()?e():n()}):function(){return t()?e():n()}:"function"==typeof e?e.invalidate?i(t,e,function(){return t()?e():n}):function(){return t()?e():n}:"function"==typeof n?n.invalidate?i(n,function(){return t()?e:n()}):function(){return t()?e:n()}:i(t,function(){return t()?e:n}):"function"==typeof e&&"function"==typeof n?function(){return t()?e():n()}:"function"===e?function(){return t()?e():n}:"function"===n?function(){return t()?e:n()}:t()?e:n}},function(t,e,n){(function(t){var e,o,r,u,i,a,c,d;d=n(2),o=d.expect,i=d.iit,u=d.idescribe,c=d.nit,a=d.ndescribe,e=d.ddescribe,r=n(11),describe("lazy-flow-at",function(){return it("should process flow.at",function(){var t,e,n;return e={},n=r.at(e,"x.y"),o(n()).to.equal(void 0),t=!1,n.onInvalidate(function(){return t=!0}),n(1),o(t).to.equal(!0),o(n()).to.equal(1),o(e.x.y).to.equal(1),t=!1,e.x={},o(t).to.equal(!0),o(e.x.y).to.equal(void 0)}),it("should process flow.at without root",function(){var e,n;return window.x=void 0,e=r.at("x.y"),o(e()).to.equal(void 0),e(1),o(e()).to.equal(1),n="undefined"!=typeof window?window:t,o(n.x.y).to.equal(1)})})}).call(e,function(){return this}())},function(t,e,n){(function(e){var o,r,u,i,a,c,d,l,s,f;s=n(6),d=s.newLine,a=s.funcString,f=i=n(5),r=f.bind,u=f.duplex,l=f.react,t.exports=i,o=function(t){return function(n,o){var r,i;if(1===arguments.length&&(o=n,n="undefined"!=typeof window?window:e),"string"==typeof o&&(o=o.split(/\.\s*/)),!o.length)return n;if("object"!=typeof n)throw new Error("expect an object as the root of flow.at");return r=o.length,0===r?n:(i=l(function(t){var e,u,a;if(arguments.length){for(e=0,a=n;r-1>e;){if(u=a[o[e]],null==u)u=a[o[e]]={};else if("object"!=typeof a)throw new Error("expect an object");a=u,e++}return a[o[e]]=t,i.cacheValue!==t&&(i.cacheValue=t,i.invalidate(),i.valid=!1),t}for(i.valid=!0,e=0,u=n;r>e;){if(!u)return;u=u[o[e]],e++}return i.cacheValue=u}),t===u&&(i.isDuplex=!0),c(n,o,i,t))}},c=function(t,e,n,o){var r,u,i,a,d;if(a=e.length,!a)return n;for(d=t,i=0;a>i;){if(!d)return;r=e[i],u=o(d,r),u.onInvalidate(function(){return c(d[r],e.slice(i+1),n),n.invalidate()}),i++}return n},i.at=o(r),i.at2=o(u),i.paths=function(t,e){var n,o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w;for(u=e.split(/\s*\.\s*/),d=[],s=0,m=u.length;m>s;s++)if(r=u[s],"["===r[0]){if(i=r.length,"]"!==r[r.length-1])throw new Error("wrong format of pathPattern for flow.paths, expect string like 'x.y, '[x, y].z', 'x.[y,z]' ...");r=r.slice(1,i-1),d.push(r.split(/\s*\.\s*|\s+/))}else d.push([r]);for(a=d[0],w=d.slice(1),f=0,v=w.length;v>f;f++){for(r=w[f],c=[],p=0,g=a.length;g>p;p++)for(o=a[p],h=0,q=path.length;q>h;h++)l=path[h],c.push(o.concat([l]));a=c}for(n=[],x=0,b=a.length;b>x;x++)r=a[x],n.push(at(t,r));return n}}).call(e,function(){return this}())},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w,y,C,T,M,L,k,H,N,_,P,I,S;S=n(2),f=S.expect,q=S.iit,v=S.idescribe,C=S.nit,y=S.ndescribe,d=S.ddescribe,I=dc.util,i=dc.bind,s=dc.duplex,L=dc.see,c=dc.classFn,_=dc.styleFrom,u=dc.attrToPropName,p=dc.extendAttrs,o=dc.Component,x=dc.list,h=dc.func,g=dc.if_,r=dc.a,M=dc.p,H=dc.span,P=dc.text,b=dc.li,l=dc.div,a=dc.checkbox,w=dc.model,k=dc.show,m=dc.hide,N=dc.splitter,T=dc.options,describe("domcom/properties/utilities",function(){return it("styleFrom",function(){var t;return t=_("display:none; zIndex:100; backgroundColor:white;"),f(t).to.deep.equal({display:"none",zIndex:"100",backgroundColor:"white"})}),it("attrToPropName",function(){var t;return t=u("background-color"),f(t).to.equal("backgroundColor")}),it("cssAdd 1",function(){var t,e;return t=M({style:{width:"1px"}}),e=t.cssAdd("width",2),f(e).to.equal(t),f(t.css("width")).to.equal("3px")}),it("cssAdd 2",function(){var t,e;return t=M({style:{width:"0.5%"}}),e=t.cssAdd("width",3.6),f(e).to.equal(t),f(t.css("width")).to.equal("4.1%")}),it("cssMul",function(){var t,e;return t=M({style:{width:"2px"}}),e=t.cssMul("width",3),f(e).to.equal(t),f(t.css("width")).to.equal("6px")})}),describe("domcom/properties/extendAttrs",function(){return it("extendAttrs({class{a:1}}, className({b:1})",function(){var t;return t=p({"class":{a:1}},{className:{b:1}}),f(c(t.className)()).to.equal("a b")}),it("extendAttrs({style:{width:1}}, {style:{height:2}})",function(){var t;return t=p({style:{width:1}},{style:{height:2}}),f(t.style.width).to.equal(1),f(t.style.height).to.equal(2)})}),describe("domcom/properties/classFn",function(){return it("get value of classFn",function(){var t,e;return t=L(!0),e=c(["a",{b:t}]),f(e()).to.equal("a b"),t(!1),f(e()).to.equal("a")}),it("should compute valid",function(){var t;return t=c(["a"]),f(t.valid).to.equal(!1),f(t()).to.equal("a"),f(t.valid).to.equal(!0),t.extend("a"),f(t.valid).to.equal(!0),f(t()).to.equal("a"),t.extend("b"),f(t.valid).to.equal(!1),f(t()).to.equal("a b"),t.extend("!b"),f(t.valid).to.equal(!1),f(t()).to.equal("a")}),it("should get class property in component",function(){var t,e;return t=L(!0),e=l({"class":{a:1,b:t}}),f(e.className()).to.equal("a b"),e.className=c({a:1,b:t}),f(e.className.valid).to.equal(!1,"className.valid 1"),f(e.hasActiveProperties).to.equal(!0,"hasActiveProperties 1"),e.mount(),f(e.className.valid).to.equal(!0,"className.valid 2"),f(e.hasActiveProperties).to.equal(!1,"hasActiveProperties 2"),f(e.node.className).to.equal("a b"),t(!1),f(e.className.valid).to.equal(!1,"className.valid 3"),f(e.hasActiveProperties).to.equal(!0,"hasActiveProperties 3"),e.update(),f(e.node.className).to.equal("a")})}),describe("domcom/properties/create",function(){return it("should create properties",function(){var t;return t=M({value:i({a:1},"a")}),f(t.className.valid).to.equal(!0,"className.valid"),f(t.hasActiveProperties).to.equal(!0,"hasActiveProperties"),t.mount(),f(t.node.value).to.equal(1)})}),describe("domcom/properties/event",function(){return it("click event ",function(){var t,e;return e=1,t=r({onclick:function(){return e=2}},"click me"),t.mount("#demo"),t.node.click(),f(e).to.equal(2)}),it("multiple handlers for one event",function(){var t,e,n,o;return t=s(o={a:1},"a"),n=sinon.spy(),e=P({onchange:n,$model:t}),e.mount(),e.node.value=2,e.node.onchange(),f(n.called).to.equal(!0),f(o.a).to.equal("2")}),it("multiple handlers for one event, with bind value",function(){var t,e,n,o;return t=s(o={a:1},"a"),n=sinon.spy(),e=P({onchange:n},t),e.mount(),e.node.value=2,e.node.onchange(),f(n.called).to.equal(!0),f(o.a).to.equal("2")})}),describe("domcom/properties/style",function(){return it("should set style property with string value",function(){var t,e;return t=r({style:"border:red 1px solid"},"red 1px solid"),f(t.className.valid).to.equal(!0,"className.valid"),f(t.hasActiveProperties).to.equal(!0,"hasActiveProperties"),e=t.mount("#demo"),f(t.node.style.border).to.equal("1px solid red")}),it("should set style property",function(){var t,e;return t=r({style:{border:"red 1px solid"}},"red 1px solid"),e=t.mount("#demo"),f(t.node.style.border).to.equal("1px solid red")}),it("value of property of style could be dc expression",function(){var t,e;return t=r({style:{border:function(){return"red 1px solid"}}},"red 1px solid"),e=t.mount("#demo"),f(t.node.style.border).to.equal("1px solid red")}),C("change style dynamically",function(){var t,e,n,o,u,i,a;return i=function(t){if(!t.match(/^\d/))return t;for(;t.length<6;)t="0"+t;return"#"+t},t=L("red"),o=L(u=0),e=r({style:{borderWidth:flow(o,function(){return o()+"px"}),borderStyle:"solid",borderColor:flow(t,function(){return i(t().toString(16))})}},"dynamic property"),e.mount("#demo"),t=0,a=function(){return t+=1118481,o(u++),e.render(),50===u?clearInterval(n):void 0},n=setInterval(a,5)})}),describe("domcom/properties/bind checkbox",function(){return it("bidirectional bind checkbox",function(){var t,e,n;return dc.directives({$model:dc.$model}),n={a:1},t=s(n,"a"),e=a({$model:t}),e.mount("#demo"),f(e.node.onchange).to.be.defined,e.node.checked=!0,e.node.onchange(),f(n.a).to.equal(!0)})})},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,w,y,C,T,M,L,k,H,N;N=n(2),m=N.expect,w=N.iit,q=N.idescribe,T=N.nit,C=N.ndescribe,f=N.ddescribe,v=dc.flow,l=dc.bindings,o=dc.Component,i=dc.TransformComponent,r=dc.Tag,u=dc.Text,H=dc.txt,y=dc.list,g=dc.func,b=dc.if_,s=dc.case_,g=dc.func,h=dc.each,d=dc.accordionGroup,c=dc.accordion,a=dc.a,M=dc.p,L=dc.span,k=dc.text,p=dc.div,describe("toString",function(){return it("should toString list of if(tag)",function(){var t,e,n,o;return o=0,t=y(n=k({onchange:function(){return o=parseInt(this.value),t.update()}},o),e=b(function(){return o},p(1),p(2))),m(t.toString()).to.match(/<List>\n  <input type="text" value=0>/)}),it("should toString  tag with props",function(){var t,e;return e=0,t=p({value:1},1),m(t.toString()).to.equal("<div value=1>1</div>")}),it("should case.toString",function(){var t;return t=s(function(){return x},{1:M(1),2:M(2),3:M(3)},"others"),m(t.toString()).to.equal('<Case renew: fn:x>\n  1: <p>1</p>\n  2: <p>2</p>\n  3: <p>3</p>\n  "others"\n</Case>')}),it("should flow.add(a_, b_).toString",function(){var t,e,n,o;return o=l({a:1,b:2}),t=o.a_,e=o.b_,n=v.add(t,e),m(n.toString()).to.equal("flow: [m[a],m[b]] --> fn:binaryFn(x(), y())")})})},function(t,e,n){var o,r,u,i,a,c,d,l,s;s=n(2),o=s.expect,u=s.iit,r=s.idescribe,c=s.nit,a=s.ndescribe,l=s.rtimeout,d=s.rinterval,i=dc.isComponent,describe("test dc",function(){return describe("dc(document)",function(){return it("dc(document) should be Component",function(){return o(!i(dc(document))).to.equal(!0)}),it("should cache DomComponent",function(){return o(dc(document)).to.equal(dc(document))}),it("dc(document).bind should be a function",function(){var t;return t=0,dc(document).bind("onclick",function(){return t=1})})})})},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w,y,C,T;T=n(2),f=T.expect,m=T.iit,h=T.idescribe,b=T.nit,g=T.ndescribe,q=T.newDemoNode,q=n(16).newDemoNode,d=dc.bindings,w=dc.see,i=dc.Tag,a=dc.Text,r=dc.List,C=dc.txt,v=dc.list,x=dc.p,s=dc.div,o=dc.Html,p=dc.html,l=dc.classFn,y=dc.styleFrom,u=dc.Nothing,c=d({a:1,b:2}).a_,describe("test base component",function(){return describe("getBaseComponent",function(){return it("should get baseComponent of List",function(){var t;return t=v([1,2]),f(t.baseComponent).to.equal(t)}),it("should have correct children",function(){var t;return t=x(0),f(t.children[0].text).to.equal(0)})}),describe("process get baseComponent of Tag",function(){return it("should getBaseComponent of two tags",function(){var t,e;return e=new i("p",{},[]),t=new i("div",{},[e]),f(t.baseComponent).to.equal(t),f(t.children[0]).to.be["instanceof"](i),
t.mount(),f(t.baseComponent.baseComponent).to.equal(t)}),it("should text.valid to be true",function(){var t;return t=C(1),t.mount(),f(!!t.valid).to.equal(!0)})}),describe("process creatDom",function(){return it("should creatDom of p(1)",function(){var t;return t=x(1),t.mount(),f(t.node.innerHTML).to.equal("1")}),it("should creatDom of p(->1)",function(){var t;return t=x(function(){return 1}),t.mount(),f(t.node.innerHTML).to.equal("1")}),it("should creatDom of p(p(p(t=txt(->1))))",function(){var t,e;return t=x(x(x(e=C(function(){return 1})))),t.mount(),f(t.node.innerHTML).to.equal("<p><p>1</p></p>")}),it("should mount Text with text is 0",function(){var t;return t=new a(0),t.mount(),f(t.node.textContent).to.equal("0")}),it("should mount tag",function(){return x=new i("p",{},[]),x.mount(),f(x.node.tagName).to.equal("P")}),it("should mount  tag with attribute",function(){return x=new i("p",{className:l("some class"),style:y("width:1px;")},[]),x.mount(),f(x.node.className).to.equal("some class"),f(x.node.getAttribute("className")).to.equal(null)}),it("process bind as value",function(){var t;return t=new i("input",{type:"text",value:c},[new a(c)]),t.mount(),f(t.node.value).to.equal("1")}),it("tag shoud mount with multiple children ",function(){var t,e,n,o;return t=new i("p",{},[e=new a(1),n=new a(2),o=new a(3)]),f(t.children.length).to.equal(3),t.mount(),f(t.node.childNodes.length).to.equal(3)}),it("tag shoud mount with Nothing child",function(){var t,e,n,o,r;return t=new i("p",{},[e=new a(1),n=new a(2),o=new a(3),r=new u]),f(t.children.length).to.equal(4),t.mount(),f(t.node.childNodes.length).to.equal(3)}),it("should create tag with children",function(){var t;return t=new i("p",{className:l("some class"),style:y("width:1px;")},[new i("span",{},[new a("adf")])]),t.mount(),f(t.node.getElementsByTagName("span").length).to.equal(1)}),it("should mount tag 2",function(){var t;return t=new i("p",{className:l("some class"),style:y("width:1px;")},[new i("span",{},[new a("adf")])]),t.mount(),f(t.node.className).to.equal("some class")}),it("should mount for tag with children",function(){var t;return t=new i("p",{className:l("some class"),style:y("width:1px;")},[new i("span",{},[new a("adf")]),new a(function(){})]),t.mount(),f(t.node.className).to.equal("some class")}),it("should mount list with children",function(){var t;return t=new r([new i("span",{},[new a("adf")]),new a(function(){return void 0})]),t.mount(),f(t.node[0].tagName).to.equal("SPAN")})}),describe("process Html",function(){return it("should process Html.node.component",function(){var t,e,n;return n=w(""),t=p(n),t.mount(e=q()),f(e.innerHTML).to.equal("<div></div>"),f(t.node.component).to.equal(t)}),it("should mount html component",function(){var t,e,n;return t=new o(n="<div>1</div><p>2</p>"),t.mount(e=q()),f(e.innerHTML).to.equal("<div><div>1</div><p>2</p></div>")}),it("should mount html component with transform",function(){var t,e,n;return t=new o(n="<div>1</div><p>2</p>",function(t){return t+"a"}),t.mount(e=q()),f(e.innerHTML).to.equal("<div><div>1</div><p>2</p>a</div>")}),it("should mount html component with reactive function",function(){var t,e,n;return n=w("<div>1</div><p>2</p>"),t=new o(n,function(t){return t+"a"}),t.mount(e=q()),f(e.innerHTML).to.equal("<div><div>1</div><p>2</p>a</div>"),n("x"),t.update(),f(e.innerHTML).to.equal("<div>xa</div>"),t.update(),f(e.innerHTML).to.equal("<div>xa</div>")}),it("should Html.bind",function(){var t,e,n,o;return n=w(""),t=p(n),t.mount(e=q()),o=1,t.bind("click",function(){return o=2}),t.node.onclick(),f(o).to.equal(2)}),it("should Html.text setter",function(){var t,e;return e=w(""),t=p(e),t.mount(),t.text="x",t.update(),f(t.node.innerHTML).to.equal("x")})})})},function(t,e,n){var o;o=n(17),e.newDemoNode=function(t){var e;return e=document.createElement("div"),document.body.appendChild(e),t&&e.setAttribute("id",t),e},e.fakeEvent=function(t,e,n){return null==e&&(e="click"),"number"==typeof n?{target:t,type:e,keyCode:n,preventDefault:function(){},stopPropagation:function(){}}:o({target:t,type:e,preventDefault:function(){},stopPropagation:function(){}},n)}},function(t,e){var n,o=Object.prototype.hasOwnProperty,r=Object.prototype.toString,u=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===r.call(t)},i=function(t){"use strict";if(!t||"[object Object]"!==r.call(t))return!1;var e=o.call(t,"constructor"),u=t.constructor&&t.constructor.prototype&&o.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!u)return!1;var i;for(i in t);return i===n||o.call(t,i)};t.exports=function a(){"use strict";var t,e,o,r,c,d,l=arguments[0],s=1,f=arguments.length,p=!1;for("boolean"==typeof l?(p=l,l=arguments[1]||{},s=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});f>s;++s)if(t=arguments[s],null!=t)for(e in t)o=l[e],r=t[e],l!==r&&(p&&r&&(i(r)||(c=u(r)))?(c?(c=!1,d=o&&u(o)?o:[]):d=o&&i(o)?o:{},l[e]=a(p,d,r)):r!==n&&(l[e]=r));return l}},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w,y,C,T,M,L,k,H,N,_,P;P=n(2),h=P.expect,b=P.iit,g=P.idescribe,M=P.nit,C=P.ndescribe,s=P.ddescribe,T=n(16).newDemoNode,c=dc.bindings,p=dc.duplex,m=dc.flow,l=dc.classFn,H=dc.styleFrom,u=dc.Tag,i=dc.Text,r=dc.List,o=dc.Component,y=dc.list,v=dc.func,q=dc.if_,_=dc.txt,a=dc.a,L=dc.p,k=dc.span,N=dc.text,w=dc.li,f=dc.div,d=dc.button,x=dc.input,describe("component  ",function(){return describe("construct component",function(){return it("component shoud have children",function(){var t;return t=L({},[1,2]),h(t.children.length).to.equal(2)}),it("should construct component",function(){var t,e;return e=new u("p",{},[]),t=new u("div",{},[e]),h(t.children[0]).to.equal(e)}),it("tag shoud have children 1",function(){var t;return t=new u("span",{},[new i("adf")]),h(t.children[0].text).to.equal("adf")}),it("tag shoud have children 2",function(){var t,e;return e=new u("span",{},[new i("adf")]),t=new u("div",{className:l("some class"),style:H("width:1px;")},[e]),h(t.children[0]).to.equal(e)})}),describe("component.append",function(){return M("should append tag.children",function(){var t,e;return t=f(),e=L(),t.append(e),h(t.children).to.equal(e)})}),describe("component.create",function(){return it("should create tag",function(){var t;return t=L(),t.mount(),h(t.node.tagName).to.equal("P"),h(t.node.innerHTML).to.equal("")}),it("should mount tag 1",function(){var t;return t=new u("div",{},[]),t.mount(),h(t.node.tagName).to.equal("DIV")}),it("should correctly create TextNode with 0 as content",function(){var t;return t=_(0),t.mount(),h(t.node.textContent).to.equal("0")}),it("should correctly create tag with 0 as content",function(){var t;return t=L(0),t.mount(),h(t.node.innerHTML).to.equal("0")}),it("should mount Text with flow value",function(){var t,e,n,o;return o=c({a:1,b:2}),t=o.a_,e=o.b_,n=_(m.add(t,e)),n.mount("#demo"),h(n.node.textContent).to.equal("3","mount")}),it("should not run event hanlder while creating tag",function(){var t,e;return e=sinon.spy(),t=L({onclick:e}),t.mount(),h(e.called).to.equal(!1),t.node.onclick(),h(e.called).to.equal(!0)}),it("should process event name without on",function(){var t,e;return e=sinon.spy(),t=L({onclick:e}),t.mount(),h(e.called).to.equal(!1),t.node.onclick(),h(e.called).to.equal(!0)}),it("should not run event hanlder while rendering tag",function(){var t,e;return e=sinon.spy(),t=L({onclick:e}),t.mount(),h(e.called).to.equal(!1),t.node.onclick(),h(e.called).to.equal(!0)}),it("should not run event hanlder while rendering button tag",function(){var t,e;return e=sinon.spy(),t=d({id:"search-ok",type:"submit",onclick:e}),t.mount(),h(e.called).to.equal(!1),t.node.onclick(),h(e.called).to.equal(!0)}),it("should not run event hanlder while rendering div > button tag",function(){var t,e;return e=sinon.spy(),t=f(d({id:"search-ok",type:"submit",onclick:e})),t.mount(),h(e.called).to.equal(!1),t.children[0].node.onclick(),h(e.called).to.equal(!0)}),it("should create tag with attribute",function(){var t,e;return t=L({className:"some class",style:"width:1px;"},[]),t.mount(),e=t.node,h(e.className).to.equal("some class"),h(e.getAttribute("className")).to.equal(null)}),it("should process function value of text",function(){var t,e,n;return t=c({a:1}).a_,e=N(t),n=e.mount(),n=e.node,h(n.value).to.equal("1")}),it("component shoud have children 2",function(){var t;return t=k("adf"),h(t.children[0].text).to.equal("adf")}),it("should create tag with children",function(){var t,e;return t=L({className:"some class",style:"width:1px;"},e=k(["adf"])),h(t.children[0]).to.equal(e),t.mount(),h(t.node.getElementsByTagName("span").length).to.equal(1)}),it("should mount tag 2",function(){var t,e;return t=L({className:"some class",style:"width:1px;"},[k(["adf"])]),e=t.mount("#demo"),h(t.parentNode.id).to.equal("demo"),h(t.node.parentNode.id).to.equal("demo")}),it("should mount tag with undefined as child",function(){var t;return t=L({className:"some class",style:"width:1px;"},k(["adf"]),_(function(){})),t.mount("#demo"),h(t.parentNode.id).to.equal("demo"),h(t.node.parentNode.id).to.equal("demo")}),it("should mount list with undefined as child",function(){var t,e;return t=y(k(["adf"]),_(function(){return void 0})),e=t.mount("#demo"),h(t.parentNode.id).to.equal("demo"),h(t.node[0].parentNode.id).to.equal("demo")})}),describe("component update",function(){return it("should render tag 1",function(){var t,e;return e=1,t=new u("p",{},[new i(function(){return e})]),t.mount(),h(t.node.innerHTML).to.equal("1"),++e,t.update(),h(t.node.innerHTML).to.equal("2"),++e,t.update(),h(t.node.innerHTML).to.equal("3")}),it("should update bidirectional bind",function(){var t,e;return t=c({a:1}).a$,e=new u("input",{value:t},[]),e.mount(),h(e.node.value).to.equal("1")}),it("should render tag 2",function(){var t,e,n;return e=1,t=L(_(function(){return e})),t.mount(),n=t.node,h(n.innerHTML).to.equal("1"),++e,t.update(),h(n.innerHTML).to.equal("2"),++e,t.update(),h(n.innerHTML).to.equal("3")}),it("should process text with bind",function(){var t,e,n,o;return o=c({a:1,b:2}),t=o.a_,e=o.b_,n=L(_(m.add(t,e))),n.mount("#demo"),h(n.node.innerHTML).to.equal("3","mount"),t(3),e(4),h(t()).to.equal(3,"a_"),h(e()).to.equal(4,"b_"),n.update(),h(n.node.innerHTML).to.equal("7","update")}),it("should process bidirectional bind",function(){var t,e;return t=c({a:1}).a$,e=N(t),e.mount("#demo"),h(e.node.value).to.equal("1"),e.node.value="2",e.node.onchange(),h(t()).to.equal("2")}),it("should render div(2) component",function(){var t;return t=f(2),t.mount(),h(t.node.innerHTML).to.equal("2")}),it("should execute component.unmount",function(){var t;return t=f(2),t.mount(),t.unmount()}),it("should execute component.remove",function(){var t;return t=f(1),t.mount(T("replace-demo3")),t.remove(),h(document.getElementById("replace-demo3").innerHTML).to.equal("")}),it("should execute component.remove child component",function(){var t,e;return t=f(e=f(3)),t.mount(T("replace-demo4")),e.remove(),h(document.getElementById("replace-demo4").innerHTML).to.equal("<div></div>")}),it("should execute component.replace",function(){var t,e;return t=f(1),t.mount(T("replace-demo")),e=f(2),e.replace(t),h(document.getElementById("replace-demo").innerHTML).to.equal("<div>2</div>")}),it("should execute component.replace child component",function(){var t,e,n;return t=f(n=f(3)),t.mount(T("replace-demo2")),e=f(2),e.replace(n),h(document.getElementById("replace-demo2").innerHTML).to.equal("<div><div>2</div></div>")}),it("p(->12) ",function(){var t;return t=L(function(){return 12}),t.mount(),h(t.node.innerHTML).to.equal("12"),t.update(),h(t.node.innerHTML).to.equal("12"),t.update(),h(t.node.innerHTML).to.equal("12")})})})},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w,y,C,T,M,L,k,H;H=n(2),h=H.expect,q=H.iit,v=H.idescribe,y=H.nit,w=H.ndescribe,l=H.ddescribe,i=dc.Component,x=dc.list,m=dc.func,g=dc.if_,p=dc.each,a=dc.a,s=dc.div,C=dc.p,L=dc.span,k=dc.text,M=dc.select,b=dc.input,r=dc.$show,o=dc.$hide,u=dc.$splitter,d=dc.bindings,f=dc.duplex,T=dc.see,dc.directives(dc.builtinDirectives),c=d({a:1}).a$,describe("directives",function(){return describe("model ",function(){return it("should process model  directive",function(){var t;return t=k({$model:c}),t.mount(),t.node.value="2",t.node.onchange(),h(c()).to.equal("2")}),it("should process event property of component with model directive",function(){var t,e,n,o;return o=0,n=f(e={},"x"),t=b({$model:n,onmouseenter:function(){return o=1}}),t.mount(),t.node.onmouseenter(),h(o).to.equal(1)})}),describe("$show",function(){return it("should process $show directive",function(){var t;return t=s({$show:!0}),t.mount(),h(t.node.style.display).to.equal("block")}),it("should process $show directive with non block display",function(){var t;return t=s({style:{display:"inline"},$show:!0}),t.mount(),h(t.node.style.display).to.equal("inline")}),it("should process $show directive with false value",function(){var t;return t=s({$show:!1},s(1)),t.mount(),h(t.node.style.display).to.equal("none")}),it("should process $show directive with function value",function(){var t,e;return e=T(!0),t=s({$show:e}),h(t.style.display.invalidate).to.be.defined,t.mount(),h(t.node.style.display).to.equal("block",1),e(!1),h(t.hasActiveStyle).to.equal(!0),t.update(),h(t.node.style.display).to.equal("none",2)}),it("should process hide directive",function(){var t;return t=s({$hide:!0},s(1)),t.mount(),h(t.node.style.display).to.equal("none"),t=s({$hide:!1},s(1)),t.mount(),h(t.node.style.display).to.equal("block")}),it("should process show directive with true or false value",function(){var t;return t=r(!1)(s(s(1))),t.mount(),h(t.node.style.display).to.equal("none"),t=r(!0)(s(s(1))),t.mount(),h(t.node.style.display).to.equal("block")})}),w("select options",function(){return it("should constructor select with options",function(){var t;return t=M({$options:[[1,2]]}),t.mount(),h(t.node.innerHTML).to.match(/<option>1/),h(t.node.innerHTML).to.equal("<option>1</option><option>2</option>")})}),describe("splitter",function(){return it("should constructor splitter",function(){var t,e,n;return n=u("vertical")(s({style:{height:"800px",width:"200px"}},s(1),s(2))),n.mount(),t=n.node.getBoundingClientRect(),h(t.width>0).to.equal(!0),h(n.node.innerHTML).to.match(/splitbar/),e=n.children,h(e[1].node.getBoundingClientRect().top).to.equal(n.node.getBoundingClientRect().top),e[1].node.onmousedown(),n.node.onmousemove({clientX:20,clientY:30,preventDefault:function(){},stopPropagation:function(){}}),h(e[1].node.getBoundingClientRect().top).to.equal(n.node.getBoundingClientRect().top),h(e[1].node.style.top).to.equal("0px"),n.node})})})},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w,y,C,T,M,L,k,H,N;N=n(2),s=N.expect,q=N.iit,v=N.idescribe,y=N.nit,x=N.ndescribe,w=N.newDemoNode,w=n(16).newDemoNode,M=dc.see,f=dc.flow,o=dc.Component,a=dc.TransformComponent,u=dc.Tag,i=dc.Text,H=dc.txt,b=dc.list,m=dc.func,g=dc.if_,h=dc.forceIf,r=dc.If,d=dc.case_,p=dc.forceCase,m=dc.func,T=dc.pick,c=dc.a,C=dc.p,L=dc.span,k=dc.text,l=dc.div,describe("singleton component: If, Case, Func, Pick, ...",function(){return describe("If",function(){return it("should optimize if_",function(){var t,e;return t=H(1),e=0,s(g(function(){return e},t,t)).to.equal(t),s(g(0,1,t)).to.equal(t),s(g(1,t,0)).to.equal(t)}),it("should NOT optimize forceIf",function(){var t,e;return e=H(1),t=h(0,1,e),s(t).to.not.equal(e),s(t.else_).to.equal(e)}),it("should compute if_((-> x), p(t), t).family",function(){var t,e;return t=H(1),e=0,s(g(function(){return e},C(t),t).family[t.dcid]).to.equal(!0)}),it("should construct if_(x, p(t1), list(p(t2), t1))",function(){var t,e,n;return n=M(0),t=H(1),e=H(2),g(n,C(t),b(e,C(t)))}),it("should render if_(see something, txt(1), txt(2))",function(){var t,e;return e=M(0),t=g(e,H(1),H(2)),t.mount(),s(t.node.textContent).to.equal("2","mount"),t.update(),s(t.node.textContent).to.equal("2","update"),e(1),t.update(),s(t.node.textContent).to.equal("1","update x 1"),e(0),t.update(),s(t.node.textContent).to.equal("2","update x 0")}),it("should render forceIf(0, txt(1), txt(2))",function(){var t;return t=h(0,H(1),H(2)),t.mount(),s(t.node.textContent).to.equal("2","mount"),t.update(),s(t.node.textContent).to.equal("2","update"),t.test=1,t.update(),s(t.node.textContent).to.equal("1","update x 1"),t.test=0,t.update(),s(t.node.textContent).to.equal("2","update x 0")}),it("should render if_(x, list(t1, t2), list(t2, t1))",function(){var t,e,n,o,r;return r=M(0),n=H(1),o=H(2),t=g(r,b(n,o),b(o,n)),t.mount(e=w("if-ref")),s(t.node[0].textContent).to.equal("2","mount"),s(e.innerHTML).to.equal("21","mount"),r(1),t.update(),s(t.node[0].textContent).to.equal("1","update x 1"),s(e.innerHTML).to.equal("12","mount")}),it("should render if_(x, list(t2, t1), t1)",function(){var t,e,n,o,r,u;return u=M(1),o=H(1),r=H(2),t=g(u,n=b(r,o),o),t.mount(e=w("if-ref")),s(e.innerHTML).to.equal("21","mount"),u(0),t.update(),s(e.innerHTML).to.equal("1")}),it("should render if_(x, t1, list(t2, t1))",function(){var t,e,n,o,r,u;return u=M(0),o=H(1),r=H(2),t=g(u,o,n=b(r,o)),t.mount(e=w("if-ref")),s(e.innerHTML).to.equal("21","mount"),t.update(),s(e.innerHTML).to.equal("21","update"),u(1),t.update(),s(e.innerHTML).to.equal("1","update x 1"),u(0),t.update(),s(e.innerHTML).to.equal("21","update x 0")}),it("should render if_(x, p(t1), list(p(t2), t1))",function(){var t,e,n,o,r,u;return u=M(0),o=H(1),r=H(2),t=g(u,n=C(o),b(C(r),o)),t.mount(e=w("if-ref")),s(e.innerHTML).to.equal("<p>2</p>1","mount"),u(1),t.update(),s(e.innerHTML).to.equal("<p>1</p>","update x 1"),u(0),t.update(),s(e.innerHTML).to.equal("<p>2</p>1","update x 0"),u(1),t.update(),s(e.innerHTML).to.equal("<p>1</p>","update x 1 again")}),it("should render if_(x, p(t1), div(t2))",function(){var t,e,n,o;return o=M(0),n=H(1),t=g(o,C(n),l(n)),t.mount(e=w("if-ref")),s(e.innerHTML).to.equal("<div>1</div>","mount"),o(1),t.update(),s(e.innerHTML).to.equal("<p>1</p>","update x 1"),o(0),t.update(),s(e.innerHTML).to.equal("<div>1</div>","update x 0"),o(1),t.update(),s(e.innerHTML).to.equal("<p>1</p>","update x 1 again")}),it("should render p(if_(x, p(t1), list(p(t2), t1)))",function(){var t,e,n,o,r,u;return u=M(0),o=H(1),r=H(2),t=C(e=g(u,n=C(o),b(C(r),o))),t.mount(),s(t.node.innerHTML).to.equal("<p>2</p>1","mount"),t.update(),s(t.node.innerHTML).to.equal("<p>2</p>1","update"),u(1),t.update(),s(t.node.innerHTML).to.equal("<p>1</p>","update x 1"),u(0),t.update(),s(t.node.innerHTML).to.equal("<p>2</p>1","update x 0"),u(1),t.update(),s(t.node.innerHTML).to.equal("<p>1</p>","update x 1 again")}),it("should render if_(x, p(t1), p list(p(t2), t1))",function(){var t,e,n,o,r,u;return u=M(0),o=H(1),r=H(2),t=g(u,e=C(o),n=C(b(C(r),o))),t.mount(),s(n.node.innerHTML).to.equal("<p>2</p>1","mount"),u(1),t.render(),s(t.node.innerHTML).to.equal("1","update x 1"),u(0),t.render(),s(n.node.innerHTML).to.equal("<p>2</p>1","mount")}),it("should render if_(x, div(1), div(2))",function(){var t,e;return e=M(0),t=g(e,l(1),l(2)),t.mount(),s(t.node.tagName).to.equal("DIV","tagName"),s(t.node.innerHTML).to.equal("2","mount"),e(1),t.update(),s(t.node.innerHTML).to.equal("1","first update"),e(0),t.update(),s(t.node.innerHTML).to.equal("2","second update")}),it("should create and update if_ with attrs",function(){var t,e,n,o;return o=M(0),n=g({"class":"main",fakeProp:o},o,t=C(1),e=C(2)),s(n).to.be["instanceof"](u),s(n.hasActiveProperties).to.equal(!0,"hasActiveProperties before mounting"),n.mount(),s(n.node.tagName).to.equal("DIV"),s(n.node.fakeProp).to.equal(0,"mount fakeProp"),s(n.node.childNodes[0].innerHTML).to.equal("2","mount innerHTML"),s(n.node.childNodes[0].tagName).to.equal("P","mount C1 tagName"),s(n.hasActiveProperties).to.equal(!1,"hasActiveProperties after mounting"),o(1),s(n.props.fakeProp).to.equal(o,"see invalidate fakeProp"),s(n.hasActiveProperties).to.equal(!0,"hasActiveProperties"),n.update(),s(n.node.fakeProp).to.equal(1,"update fakeProp"),s(n.node.childNodes[0].innerHTML).to.equal("1","update innerHTML"),s(n.node.childNodes[0]).to.equal(t.node)}),it("should create and render if followed by other node ",function(){var t,e,n,o,r,u,i;return e=document.getElementById("demo2"),e.innerHTML="",i=M(0),t=b(u=g(i,n=C(1),o=C(2)),r=C(3)),t.mount(e),s(u.node.innerHTML).to.equal("2"),s(e.innerHTML).to.equal("<p>2</p><p>3</p>"),i(1),t.update(),s(u.node.innerHTML).to.equal("1","pif update"),s(e.innerHTML).to.equal("<p>1</p><p>3</p>","demo2Node update"),s(t.node[0].innerHTML).to.equal("1","comp update")}),it("should create and render embedded if",function(){var t,e,n,o,r;return r=M(0),o=b(k(r),t=g(r,e=l(1),n=l(2))),o.mount(),s(o.parentNode).to.equal(document.body),s(o.node[1].innerHTML).to.equal("2"),s(t.parentNode).to.equal(o.parentNode),r(1),o.update(),s(t.parentNode).to.equal(o.parentNode),s(t.node.innerHTML).to.equal("1"),s(n.node.innerHTML).to.equal("2"),s(t.node).to.equal(e.node),s(o.node[1]).to.equal(e.node)}),it("should process event in embedded if 2",function(){var t,e,n,o;return o=M(0),t=b(n=k({onchange:function(){return o(parseInt(this.value)),t.update()}},o),e=g(o,l(1),l(2))),t.mount(),s(e.node.innerHTML).to.equal("2"),n.node.value=1,n.node.onchange(),s(e.node.innerHTML).to.equal("1"),n.node.value=0,n.node.onchange(),s(e.node.innerHTML).to.equal("2")}),it("should process embedded if 2",function(){var t,e,n,o;return o=M(0),t=b(n=k(o),e=g(o,l(1),l(2))),t.mount(),s(e.node.innerHTML).to.equal("2"),o(1),t.update(),s(e.node.innerHTML).to.equal("1"),o(0),t.update(),s(e.node.innerHTML).to.equal("2")}),it("should process two list with same children",function(){var t,e,n,o,r,u,i;return i=M(1),n=H(1),o=H(2),r=H(3),u=H(4),t=g(i,b(n,o,r,u),b(u,n,o,r)),t.mount(e=w("list")),s(e.innerHTML).to.equal("1234"),i(0),t.update(),s(e.innerHTML).to.equal("4123"),i(1),t.update(),s(e.innerHTML).to.equal("1234")})}),describe("Case",function(){return it("should create and render case_",function(){var t,e;return e=M(0),t=d(e,{1:C("a"),2:C("b"),3:C("c")},"others"),t.mount(),s(t.node).to.be["instanceof"](window.Text),s(t.node.textContent).to.equal("others"),e(1),t.update(),s(t.node.innerHTML).to.equal("a")}),it("should create and render forceCase",function(){var t;return t=p(0,{1:C("a"),2:C("b"),3:C("c")},"others"),t.mount(),s(t.node).to.be["instanceof"](window.Text),s(t.node.textContent).to.equal("others"),t.test=1,t.update(),s(t.node.innerHTML).to.equal("a")}),it("should create and render array case_",function(){var t,e;return e=M(3),t=d(e,[C("a"),C("b"),C("c")],"others"),t.mount(),s(t.node).to.be["instanceof"](window.Text),s(t.node.textContent).to.equal("others"),e(1),t.update(),s(t.node.innerHTML).to.equal("b")})}),describe("Func",function(){return it("func(->12) ",function(){var t;return t=m(function(){return 12}),t.mount(),s(t.node.textContent).to.equal("12"),t.update(),s(t.node.textContent).to.equal("12"),t.update(),s(t.node.textContent).to.equal("12")}),it("p(-> a))",function(){var t;return c=M(1),t=C(c),t.mount(),c(2),t.update(),s(t.node.innerHTML).to.equal("2","update a 2"),c(3),t.update(),c(4),t.update(),s(t.node.innerHTML).to.equal("4","update a 4")}),it("should  create func component",function(){var t,e;return e=M(1),t=m(e),t.mount(),s(t.node).to.be["instanceof"](window.Text),s(t.node.textContent).to.equal("1")}),it("should create and  render func",function(){var t,e;return e=M(0),t=m(f(e,function(){return{1:C(1),2:C(2),3:C(3)}[e()]||"others"})),t.mount(),s(t.node).to.be["instanceof"](window.Text),s(t.node.textContent).to.equal("others"),e(1),t.update(),s(t.node.innerHTML).to.equal("1"),e(2),t.update(),s(t.node.innerHTML).to.equal("2")}),it("should create and update func with  attrs",function(){var t,e;return e=M(1),t=m({"class":"main",fakeProp:e},e),t.mount(),s(t.node.tagName).to.equal("DIV"),s(t.node.fakeProp).to.equal(1),s(t.node).to.be["instanceof"](Element),s(t.node.childNodes[0].textContent).to.equal("1"),e(2),t.update(),s(t.node.fakeProp).to.equal(2),s(t.node.childNodes[0].textContent).to.equal("2")}),it("should process tag with function",function(){var t;return t=C(H(function(){return 1})),s(t.children[0]).to.be["instanceof"](i),t.mount(),s(t.node.innerHTML).to.equal("1")}),it("should create and update func with a closure variable",function(){var t,e;return e=M(1),t=m(function(){return H(e)}),t.mount(),s(t.node.textContent).to.equal("1"),e(2),t.update(),s(t.node.textContent).to.equal("2")})}),describe("Pick",function(){return it("pick(host)",function(){var t,e,n;return e={content:1},t=T(e),n=0,t.onSetContent=function(t){return n="called"},t.mount(),s(t.node.textContent).to.equal("1"),e.content=2,s(n).to.equal("called"),t.update(),s(t.node.textContent).to.equal("2")}),it('pick(host, "content", 1) by setContent',function(){var t,e,n;return e={content:1},t=T(e),n=0,t.onSetContent=function(t){return n="called"},t.mount(),s(t.node.textContent).to.equal("1"),t.setContent(2),s(n).to.equal("called"),t.update(),s(t.node.textContent).to.equal("2")}),it('pick(host, "activeContent", 1)',function(){var t,e,n;return e={},t=T(e,"activeContent",1),n=0,t.onSetContent=function(t){return n="called"},t.mount(),s(t.node.textContent).to.equal("1"),e.activeContent=2,s(n).to.equal("called"),t.update(),s(t.node.textContent).to.equal("2")}),it('pick(host, "activeContent", 1) by setContent',function(){var t,e,n;return e={},t=T(e,"activeContent",1),n=0,t.onSetContent=function(t){return n="called"},t.mount(),s(t.node.textContent).to.equal("1"),t.setContent(2),s(n).to.equal("called"),t.update(),s(t.node.textContent).to.equal("2")})})})},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w,y,C,T,M,L;L=n(2),l=L.expect,m=L.iit,p=L.idescribe,x=L.nit,q=L.ndescribe,b=L.newDemoNode,b=n(16).newDemoNode,y=dc.see,s=dc.flow,o=dc.Component,i=dc.Tag,a=dc.Text,u=dc.List,r=dc.If,M=dc.txt,v=dc.list,f=dc.func,h=dc.if_,g=dc.mergeIf,c=dc.a,w=dc.p,C=dc.span,T=dc.text,d=dc.div,describe("domcom/mergeIf",function(){return it("should construct mergeIf(x, t1, t2)",function(){var t,e,n,o;return o=y(0),e=M(1),n=M(2),t=g(o,e,n),l(t.isText).to.equal(!0),t.mount(),l(t.node.textContent).to.equal("2"),o(1),t.update(),l(t.node.textContent).to.equal("1")}),it("should render mergeIf(x, list(t1, t2), list(t2, t1))",function(){var t,e,n,o,r;return r=y(0),n=M(1),o=M(2),t=g(r,v(n,o),v(o,n)),l(t.isList).to.equal(!0),t.mount(e=b("if-ref")),l(t.node[0].textContent).to.equal("2","mount"),l(e.innerHTML).to.equal("21","mount"),r(1),t.update(),l(t.node[0].textContent).to.equal("1","update x 1"),l(e.innerHTML).to.equal("12","update")}),it("should render if_(x, list(t2, t1), new List([t1]))",function(){var t,e,n,o,r,i;return i=y(1),o=M(1),r=M(2),t=g(i,n=v(r,o),new u([o])),l(t.isList).to.equal(!0),t.mount(e=b("if-ref")),l(e.innerHTML).to.equal("21","mount"),i(0),t.update(),l(e.innerHTML).to.equal("1")}),it("should render mergeIf(x, new List([t1]), list(t2, t1))",function(){var t,e,n,o,r,i;return i=y(1),o=M(1),r=M(2),t=g(i,new u([o]),n=v(r,o)),l(t.isList).to.equal(!0),t.mount(e=b("if-ref")),l(e.innerHTML).to.equal("1","mount"),i(0),t.update(),l(e.innerHTML).to.equal("21")}),it("should render mergeIf(x, p(t1), p(t2))",function(){var t,e,n,o,r;return r=y(0),n=M(1),o=M(2),t=g(r,w(n),w(o)),l(t.isTag).to.equal(!0),t.mount(e=b("if-ref")),l(e.innerHTML).to.equal("<p>2</p>","mount"),r(1),t.update(),l(e.innerHTML).to.equal("<p>1</p>","update x 1")}),it("should render mergeIf(x, p(t1), p(t2, t1))",function(){var t,e,n,o,r;return r=y(0),n=M(1),o=M(2),t=g(r,w(n),w(o,n)),l(t.isTag).to.equal(!0),t.mount(e=b("if-ref")),l(e.innerHTML).to.equal("<p>21</p>","mount"),r(1),t.update(),l(e.innerHTML).to.equal("<p>1</p>","update x 1"),r(0),t.update(),l(e.innerHTML).to.equal("<p>21</p>","update x 0"),r(1),t.update(),l(e.innerHTML).to.equal("<p>1</p>","update x 1 again")}),it("should render mergeIf(x, p(t1), div(t2))",function(){var t,e,n;return n=y(0),e=M(1),t=g(n,w(e),d(e)),l(t instanceof r).to.equal(!0)}),it("should render mergeIf(x, div(1), div(2))",function(){var t,e;return e=y(0),t=g(e,d(1),d(2)),t.mount(),l(t.isTag).to.equal(!0),l(t.children[0].isText).to.equal(!0),l(t.node.tagName).to.equal("DIV","tagName"),l(t.node.innerHTML).to.equal("2","mount"),e(1),t.update(),l(t.node.innerHTML).to.equal("1","first update")}),it("should render mergeIf(x, div(1), div(p(2)))",function(){var t,e;return e=y(0),t=g(e,d(1),d(w(2))),t.mount(),l(t.isTag).to.equal(!0),l(t.children[0]instanceof r).to.equal(!0),l(t.node.tagName).to.equal("DIV","tagName"),l(t.node.innerHTML).to.equal("<p>2</p>","mount")}),it("should render mergeIf(x, div({class}, 1), div({class}, 2))",function(){var t,e;return e=y(0),t=g(e,d({"class":"a"},1),d({"class":"b"},2)),t.mount(),l(t.isTag).to.equal(!0),l(t.node.className).to.equal("b"),e(1),t.update(),l(t.node.className).to.equal("a")}),it("should render mergeIf(x, div({a:1}, 1), div({b:2}, 2))",function(){var t,e;return e=y(0),t=g(e,d({a:1},1),d({b:2},2)),t.mount(),l(t.isTag).to.equal(!0),l(t.node.a).to.equal(""),l(t.node.b).to.equal(2),e(1),t.update(),l(t.node.a).to.equal(1),l(t.node.b).to.equal("","x 1")}),it("should render mergeIf(x, div({onclick}, 1), div({onclick}, 2))",function(){var t,e;return e=y(0),c=0,t=g(e,d({onclick:function(){return c=1}},1),d({onclick:function(){return c=2}},2)),t.mount(),t.node.onclick(),l(c).to.equal(2,"first click"),e(1),t.update(),t.node.onclick(),l(c).to.equal(1,"second click")}),it("should NOT merge If(0, div({onclick}, 1), div({onclick}, 2), true, false, true)",function(){var t;return c=0,t=new r(0,d({onclick:function(){return c=1}},1),d({onclick:function(){return c=2}},2),!0,!1,!0),t.mount(),t.node.onclick(),l(c).to.equal(2,"first click"),t.test=1,t.update(),t.node.onclick(),l(c).to.equal(1,"second click")}),it("should render mergeIf(x, div({style}, 1), div({style}, 2))",function(){var t,e;return e=y(0),t=g(e,d({style:{width:"100px"}},1),d({style:{width:"200px"}},2)),t.mount(),l(t.node.style.width).to.equal("200px"),e(1),t.update(),l(t.node.style.width).to.equal("100px")})})},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w,y,C,T,M,L,k,H,N,_,P,I,S,$;$=n(2),g=$.expect,w=$.iit,b=$.idescribe,k=$.nit,M=$.ndescribe,L=$.newDemoNode,L=n(16).newDemoNode,y=dc.isComponent,o=dc.Component,a=dc.TransformComponent,u=dc.Tag,i=dc.Text,S=dc.txt,C=dc.list,r=dc.List,q=dc.func,x=dc.if_,p=dc.case_,q=dc.func,m=dc.each,l=dc.accordionGroup,d=dc.accordion,c=dc.a,H=dc.p,P=dc.span,I=dc.text,h=dc.div,s=dc.all,v=dc.every,T=dc.nItems,f=dc.bind,N=dc.pour,_=dc.see,describe("group component: List, Each",function(){return describe("List",function(){return it("all of item in list should be  component",function(){var t;return t=C([1,2]),g(y(t.children[0])).to.equal(!0)}),it("should create list component",function(){var t;return t=C([P(["adf"])]),t.mount(),g(t.node[0].tagName).to.equal("SPAN")}),it("component list should have length",function(){var t;return t=C([1,2]),g(t.children.length).to.equal(2)}),it("list can be constructructed  from mulitple argumnents",function(){var t;return t=C(1,2),g(t.children.length).to.equal(2)}),it("should create list",function(){var t;return t=C(1,2),t.mount(),g(t.node[0].textContent).to.equal("1"),g(t.node[1].textContent).to.equal("2")}),it("should create list with attrs",function(){var t,e;return e=2,t=C({"class":"main",fakeProp:function(){return e}},1,S(function(){return e})),t.mount(),g(t.node.tagName).to.equal("DIV"),g(t.node.childNodes[0].textContent).to.equal("1"),g(t.node.childNodes[1].textContent).to.equal("2"),e=3,t.update(),g(t.node.fakeProp).to.equal(3),g(t.node.childNodes[1].textContent).to.equal("3","textContent update")}),it("list(txt(->12))",function(){var t;return t=C(S(function(){return 12})),t.mount(),g(t.node.textContent).to.equal("12")}),it("list setChildren after mounting",function(){var t;return t=new r([S(1)]),t.mount(),g(t.node[0].textContent).to.equal("1"),g(function(){var e;return t.setChildren(1,e=S(2))}).not.to["throw"]()}),it("list setChildren: similar to splitter",function(){var t,e,n;return t=new r([S(1),n=S(3)]),t.setChildren(1,e=S(2),n),t.mount(),g(t.node[0].textContent).to.equal("1"),g(t.node[1].textContent).to.equal("2"),g(t.node[2].textContent).to.equal("3");
}),it("list(p(txt(->12))) ",function(){var t;return t=C(H(S(function(){return 12}))),t.mount(),t.update(),g(t.node.innerHTML).to.equal("12")}),it("list(p(->12)) ",function(){var t;return t=C(H(function(){return 12})),t.mount(),t.update(),g(t.node.innerHTML).to.equal("12")}),it("list(txt(1)) ",function(){var t,e;return t=new r([S(1)]),t.mount(e=L("list")),t.update(),t.setLength(0),t.update(),g(e.innerHTML).to.equal("")}),it("list(txt(1), txt(2), txt(3)) and move child",function(){var t,e,n,o;return t=C(n=S(1),o=S(2),o=S(3)),t.mount(e=L("list")),g(e.innerHTML).to.equal("123"),t.removeChild(0),t.pushChild(n),t.renderDom(),g(e.innerHTML).to.equal("231")})}),describe("every, all, nItems",function(){return it("every ",function(){var t,e;return t=v([1,2],function(t){return t}),t.mount(e=L("list")),t.update(),g(t.node.length).to.equal(2)}),it("all ",function(){var t,e;return t=s({a:1,b:2},function(t,e){return C(t,e)}),t.mount(e=L("list")),t.update(),g(t.node.length).to.equal(2)}),it("nItems ",function(){var t,e;return t=T(2,function(t){return t}),t.mount(e=L("list")),t.update(),g(t.node.length).to.equal(2)})}),describe("Each",function(){return it("should create empty each component",function(){var t,e;return t=m(e=[],function(t,e){return H(t)}),t.mount(),g(t.node).to.be["instanceof"](Array),g(t.node.length).to.equal(0),t.update(),g(t.node.length).to.equal(0)}),it("should create each component with single item",function(){var t,e;return t=m(e=[1],function(t,e){return H(t)}),t.mount(),g(t.node).to.be["instanceof"](Array),g(t.node.length).to.equal(1),g(t.node[0].innerHTML).to.equal("1"),t.update(),g(t.node.length).to.equal(1),g(t.node[0].innerHTML).to.equal("1")}),it("should set childrenNextNode correctly",function(){var t,e,n;return n=[1,2],t=C(e=m(n,function(t){return H(t)}),"some other thing"),t.mount(),g(e.listComponent.childrenNextNode).to.equal(t.node[1]),n.push(3),t.render(),g(e.listComponent.children[2].nextNode).to.equal(t.node[1])}),it("should create each component with two item",function(){var t,e;return t=m(e=["each","simple"],function(t,e){return H(t)}),t.mount(),g(t.node).to.be["instanceof"](Array),g(t.node[0]).to.be["instanceof"](Element),g(t.node[1].innerHTML).to.equal("simple")}),it("should mount and render each component",function(){var t,e,n;return document.getElementById("demo").innerHTML="",t=m(n=["each","simple"],function(t,e){return H(t)}),t.mount(e=L("each")),g(t.node[0].innerHTML).to.equal("each"),g(t.node[1].innerHTML).to.equal("simple"),n.setItem(0,3),t.update(),g(t.node[0].innerHTML).to.equal("3","update node 0"),n.setItem(1,4),t.update(),g(t.node[1].innerHTML).to.equal("4","update node 1"),g(e.innerHTML).to.equal("<p>3</p><p>4</p>","update innerHTML"),n.setItem(2,5),t.update(),g(t.node[2].innerHTML).to.equal("5","update list[2] = 5"),n.setLength(0),t.update(),g(t.listComponent.children.length).to.equal(0,"comp.listComponent.children.length = 0"),g(t.node.length).to.equal(0,"node.length")}),it("should process binding on item",function(){var t,e;return document.getElementById("demo").innerHTML="",t=m(e=[{text:"a"},{text:"b"}],function(t,e){return H(S(f(t,"text")))}),t.mount("#demo"),g(t.node[0].textContent).to.equal("a"),g(t.node[1].textContent).to.equal("b"),e[0].text="c",t.update(),g(t.node[0].textContent).to.equal("c","update c"),e[1].text="d",t.update(),g(t.node[1].textContent).to.equal("d","update d"),e.setItem(2,{text:"e"}),t.update(),g(t.node[2].textContent).to.equal("e"),e.setLength(0),t.update(),g(t.node.length).to.equal(0)}),it("should process items in template function",function(){var t,e;return t=m(e=["a","b"],function(t,e,n,o){return H(S(function(){return n[e]}))}),t.mount(),e.setItem(0,"c"),t.update(),g(t.node[0].textContent).to.equal("c")}),it("should process tag with each",function(){var t,e,n,o;return o=1,n=null,t=new u("div",{},[e=m([1],N(function(t){return n=S(o)}))]),t.mount(),g(t.node.innerHTML).to.equal("1"),o=2,t.update(),g(n.node.textContent).to.equal("2","update, 2"),g(e.node[0].textContent).to.equal("2"),g(t.node.innerHTML).to.equal("2")}),it("should create and update renew function as list of Each",function(){var t,e;return e=1,t=m(function(){return[e]},function(t){return S(t)}),t.mount(),g(t.node[0].textContent).to.equal("1"),e=2,t.update(),g(t.node[0].textContent).to.equal("2","update 2")}),it("should create and update deeper embedded each",function(){var t,e,n,o;return o=1,t=h({},n=new u("span",{},[e=m(function(){return[o]},function(t){return S(t)})])),t.mount(),g(e.listComponent.parentNode).to.equal(n.node),g(e.node[0].textContent).to.equal("1"),o=2,t.update(),g(e.listComponent.parentNode).to.equal(n.node),g(e.node[0].textContent).to.equal("2"),g(t.node.innerHTML).to.equal("<span>2</span>")}),it("should create and update each where item return a closure variable",function(){var t,e;return e=_(1),t=m([1],function(){return S(e)}),t.mount(),g(t.node[0].textContent).to.equal("1"),e(2),t.update(),g(t.node[0].textContent).to.equal("2")}),it("should create and update embedded each where item return a closure variable",function(){var t,e,n;return n=_(1),t=new u("span",{},[e=m([1],function(t){return S(n)})]),t.mount(),g(e.listComponent.parentNode).to.equal(t.node),g(e.node[0].textContent).to.equal("1"),n(2),t.update(),g(e.listComponent.parentNode).to.equal(t.node),g(e.node[0].textContent).to.equal("2"),g(t.node.innerHTML).to.equal("2")}),it("should create and update embedded each in 3 layer",function(){var t,e,n,o;return o=_(1),t=h({},h({},n=new u("span",{},[e=m([1],function(t){return S(o)})]))),t.mount(),g(e.listComponent.parentNode).to.equal(n.node),g(e.node[0].textContent).to.equal("1"),o(2),t.update(),g(e.listComponent.parentNode).to.equal(n.node),g(e.node[0].textContent).to.equal("2"),g(t.node.innerHTML).to.equal("<div><span>2</span></div>")}),it("should create and update embedded each in 3  layer",function(){var t,e,n,o;return o=1,t=h({},h({},n=new u("span",{},[e=m(function(){return[o]},function(t){return S(t)})]))),t.mount(),g(e.listComponent.parentNode).to.equal(n.node),g(e.node[0].textContent).to.equal("1"),o=2,t.update(),g(e.listComponent.parentNode).to.equal(n.node),g(e.node[0].textContent).to.equal("2"),g(t.node.innerHTML).to.equal("<div><span>2</span></div>")}),it("should process each with function as items",function(){var t,e,n;return n=1,e=null,t=m(function(){return[n]},function(t){return t}),t.mount(),g(t.node[0].textContent).to.equal("1"),n=2,t.render(),g(t.node[0].textContent).to.equal("2","after x = 2")}),it("should process each under each and with function as items",function(){var t,e,n,o;return o=1,n=null,t=h({},e=m([1],function(){return n=m(function(){return[o]},function(t){return t})})),t.mount(),g(e.listComponent.parentNode).to.equal(t.node),g(e.node[0][0].textContent).to.equal("1"),g(n.getNode()[0].textContent).to.equal("1"),o=2,t.render(),g(e.listComponent.parentNode).to.equal(t.node),g(n.getNode()[0].textContent).to.equal("2"),g(t.node.innerHTML).to.equal("2","after x = 2")}),it("should mount and update each",function(){var t;return t=new u("span",{},[m([1],function(t){return S(1)})]),t.mount(),g(t.node.innerHTML).to.equal("1"),t.update(),g(t.node.innerHTML).to.equal("1")}),it("should push and setLength of each",function(){var t,e;return e=[1,2,3,4,5,6],t=m(e,function(t){return S(t)}),t.mount(),e.push(7),t.update(),g(t.node.length).to.equal(7,"push 7"),e.setLength(4),t.update(),g(t.node.length).to.equal(4,"setLength 4")}),it("should update each with component as the item of list 1",function(){var t,e;return t=m([S(1)],function(t){return t}),t.mount(),g(t.node[0].textContent).to.equal(e="1"),t.update(),g(t.node[0].textContent).to.equal("1")}),it("should update each with component as the item of list 2",function(){var t,e;return t=h(m([S(1)],function(t){return t})),t.mount(),g(t.node.innerHTML).to.equal(e="1"),t.update(),g(t.node.innerHTML).to.equal("1")}),it("should update each with component as the item of list 3",function(){var t,e;return t=h(h(m([S(1)],function(t){return t}))),t.mount(),g(t.node.innerHTML).to.equal(e="<div>1</div>"),t.update(),g(t.node.innerHTML).to.equal("<div>1</div>")}),it("should always attach and detach each in multiple iteration",function(){var t,e,n;return n=_(!0),e=[1,2],t=x(n,m(e,function(t){return h(t)})),t.mount(),n(!1),t.render(),n(!0),t.render(),g(t.node.parentNode).to.equal(document.body),n(!1),t.render(),g(t.node.parentNode).not.to.equal(document.body)})})})},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w,y,C,T,M,L;L=n(2),p=L.expect,g=L.iit,m=L.idescribe,x=L.nit,b=L.ndescribe,l=L.ddescribe,y=dc.see,o=dc.Component,i=dc.TransformComponent,r=dc.Tag,u=dc.Text,M=dc.txt,q=dc.list,h=dc.func,v=dc.if_,c=dc.case_,h=dc.func,f=dc.each,d=dc.clone,a=dc.a,w=dc.p,C=dc.span,T=dc.text,s=dc.div,describe("Component.refs, clone",function(){return describe("refs",function(){return it("should throw error while constucting conflicted component list(t, t))",function(){var t;return t=M(1),p(function(){return q(t,t)}).to["throw"](Error)}),it("should throw error while constucting conflicted component list(t, p(t)))",function(){var t;return t=M(1),p(function(){return q(t,w(t))}).to["throw"](Error)}),it("should throw error while conflicted component in list(p(t), if_(1, t, 0))",function(){var t;return t=M(1),p(function(){return q(w(t),v(1,t,0))}).to["throw"](Error)}),it("should throw error while conflicted component in list(p(t), if_(0, 2, t))",function(){var t;return t=M(1),p(function(){return q(w(t),v(0,2,t))}).to["throw"](Error)}),it("should throw error while conflicted component in list(p(t), if_(-> x, t, t))",function(){var t,e;return t=M(1),e=0,p(function(){return q(w(t),v(function(){return e},t,t))}).to["throw"](Error)}),it("should throw error while conflicted component in list(p(t), if_(-> x, p(t), t))",function(){var t,e;return t=M(1),e=0,p(function(){return q(w(t),v(function(){return e},w(t),t))}).to["throw"](Error)}),it("should getBaseComponent of if_((-> x), t=txt(1), t)",function(){var t,e,n;return n=y(0),t=v(n,e=M(1),e),t.mount(),t.update()})}),describe("Clone",function(){return it("should not clone node event handler",function(){var t,e;return t=document.createElement("p"),t.value=1,t.fakeProp=2,t.onclick=function(){},e=t.cloneNode(),p(e.onclick).to.equal(null),p(e.value).to.equal(void 0),p(e.fakeProp).to.equal(void 0)}),it("should clone TextNode",function(){var t,e;return t=document.createTextNode("afd"),t.value=1,t.fakeProp=2,t.onclick=function(){},e=t.cloneNode(),p(e.onclick).to.equal(void 0),p(e.textContent).to.equal("afd"),p(e.value).to.equal(void 0),p(e.fakeProp).to.equal(void 0)}),it("should process text clone component ",function(){var t,e;return t=q(e=M(1),d(e)),t.mount("#demo"),t.update(),p(t.node[1].textContent).to.equal("1")}),it("should process tag clone component ",function(){var t,e,n;return n=q(t=w(1),e=d(t)),n.mount("#demo"),n.update(),p(n.node[1].innerHTML).to.equal("1")}),it("should process if_ clone component ",function(){var t,e,n,o,r;return r=y(0),o=q(t=w(2),e=d(t)),n=v(r,t=w(3),o),n.mount("#demo"),r(1),n.update(),p(n.node.innerHTML).to.equal("3")})})})},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w,y,C,T,M,L;L=n(2),h=L.expect,q=L.iit,v=L.idescribe,w=L.nit,x=L.ndescribe,s=L.ddescribe,o=dc.Component,i=dc.TransformComponent,r=dc.Tag,u=dc.Text,M=dc.txt,b=dc.list,m=dc.func,g=dc.if_,l=dc.case_,m=dc.func,p=dc.each,d=dc.accordionGroup,c=dc.accordion,a=dc.a,y=dc.p,C=dc.span,T=dc.text,f=dc.div,describe("accordion",function(){return it("should update accordionGroup",function(){var t,e;return t=d({},"group head",p([1],function(t){return M(1)}),{}),t.mount(),h(t.node.innerHTML).to.equal(e='<div class="panel-heading"><h4 class="panel-title"><div class="accordion-toggle"><span>group head</span></div></h4></div><div class="panel-collapse" style="display: none;"><div class="panel-body">1</div></div>'),t.update(),h(t.node.innerHTML).to.equal(e)}),it("should update accordion group 2",function(){var t;return t=d({},"group head",new r("span",{},[p([1],function(t){return M(1)})]),{}),t.mount(),h(t.node.innerHTML).to.equal('<div class="panel-heading"><h4 class="panel-title"><div class="accordion-toggle"><span>group head</span></div></h4></div><div class="panel-collapse" style="display: none;"><div class="panel-body"><span>1</span></div></div>')}),it("should mount accordion",function(){var t;return t=c({},[[{},"group head",new r("span",{},[p([1],function(t){return M(1)})]),{}]],{}),t.mount(),h(t.node.innerHTML).to.equal('<div class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><div class="accordion-toggle"><span>group head</span></div></h4></div><div class="panel-collapse" style="display: none;"><div class="panel-body"><span>1</span></div></div></div>')}),it("should update accordion",function(){var t,e;return t=c({},[[{},"group head",M(1),{}]],{}),t.mount(),h(t.node.innerHTML).to.equal(e='<div class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><div class="accordion-toggle"><span>group head</span></div></h4></div><div class="panel-collapse" style="display: none;"><div class="panel-body">1</div></div></div>'),t.update(),h(t.node.innerHTML).to.equal(e)}),it("should update accordion 2",function(){var t,e;return t=c({},[[{},"group head",new r("span",{},[p([1],function(t){return M(1)})]),{}]],{}),t.mount(),h(t.node.innerHTML).to.equal(e='<div class="panel panel-default"><div class="panel-heading"><h4 class="panel-title"><div class="accordion-toggle"><span>group head</span></div></h4></div><div class="panel-collapse" style="display: none;"><div class="panel-body"><span>1</span></div></div></div>'),t.update(),h(t.node.innerHTML).to.equal(e)})})},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w,y,C,T,M,L,k,H,N,_,P,I;I=n(2),p=I.expect,q=I.iit,v=I.idescribe,T=I.nit,C=I.ndescribe,l=I.ddescribe,h=n(16).fakeEvent,f=dc.duplex,L=dc.see,d=dc.classFn,N=dc.styleFrom,y=dc.model,k=dc.show,u=dc.Tag,i=dc.Text,r=dc.List,o=dc.Component,w=dc.list,m=dc.func,g=dc.if_,P=dc.txt,a=dc.a,M=dc.p,H=dc.span,_=dc.text,x=dc.li,s=dc.div,c=dc.button,b=dc.input,describe("component event",function(){return it("component shoud call listeners before mounting",function(){var t,e;return e=0,t=M(),t.on("mount",function(){return e=1}),t.mount(),p(e).to.equal(1)}),it("component shoud call listeners before mounting if_",function(){var t,e;return e=0,t=g(1,2,3),t.on("mount",function(){return e=1}),t.mount(),p(e).to.equal(1)}),it("component shoud call then_.listeners before updating if_",function(){var t,e,n;return n=L(0),t=g(n,e=P(1),P(2)),e.on("mount",function(){return n(1)}),t.mount(),p(n()).to.equal(0),n(1),t.update(),p(n()).to.equal(1)}),it("component shoud not call embeded listeners before updating if_",function(){var t,e,n;return n=L(0),t=g(n,M(e=P(1)),P(2)),e.on("mount",function(){return n(1)}),t.mount(),p(n()).to.equal(0),n(1),t.update(),p(n()).to.equal(1)}),it("component shoud call listeners after mounting",function(){var t,e;return e=L(0),t=M(),t.on("mount",function(){return e(1)}),t.on("unmount",function(){return e(2)}),t.mount(),p(e()).to.equal(1),t.unmount(),p(e()).to.equal(2)}),it("component shoud call mount and unmount listeners",function(){var t,e,n;return e=0,n=0,t=g(1,2,3),t.on("mount",function(){return e=1}),t.on("unmount",function(){return n=2}),t.mount(),p(e).to.equal(1),t.unmount(),p(n).to.equal(2)}),it('component shoud NOT call then_.listeners["mount"] before updating if_',function(){var t,e,n,o,r;return o=L(0),r=0,t=g(o,e=P(1),n=P(2)),e.on("mount",function(){return o(1)}),n.on("unmount",function(){return r=2}),t.mount(),p(o()).to.equal(0,"mount"),o(1),t.update(),p(o()).to.equal(1),p(r).to.equal(0)}),it("component shoud NOT call embeded mountCallback before updating if_",function(){var t,e,n,o,r;return o=L(0),r=0,t=g(o,M(e=P(1)),M(n=P(2))),e.on("mount",function(){return o(1)}),t.mount(),p(o()).to.equal(0),o(1),t.update(),p(o()).to.equal(1),p(r).to.equal(0)})}),describe("delegate event",function(){return it("component should delegate click event",function(){var t,e;return e=0,t=M(),t.mount(),t.delegate("click"),t.do_click=function(){return e=1},t.node.onclick(h(t.node)),p(e).to.equal(1)}),it("component should delegate click event to its holder",function(){var t,e,n;return n=0,e=w([t=M()]),e.mount(),t.delegateByHolder("click"),e.do_click=function(){return n=1},t.node.onclick(h(t.node)),p(n).to.equal(1)}),it("component should delegate click event from tag ancestor to its holder",function(){var t,e,n,o;return o=0,e=s(n=w([t=M()])),e.mount(),e.delegateByHolder("click"),n.do_click=function(){return o=1},e.node.onclick(h(t.node)),p(t.node.onclick).to.be["null"],p(o).to.equal(1)}),it("component should delegate click event by given component",function(){var t,e,n,o;return o=0,e=s(n=w([t=M()])),e.mount(),e.delegateByComponent("click",n),n.do_click=function(){return o=1},e.node.onclick(h(t.node)),p(t.node.onclick).to.be["null"],p(o).to.equal(1)})})},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v;v=n(2),u=v.expect,a=v.iit,i=v.idescribe,l=v.nit,d=v.ndescribe,r=v.ddescribe,f=/^((:([$_\w]+)(\([^\(\)]+\))?)|(\([^\(\)]+\))|([^:\(]*))+$/,s=/^((:([$_\w]+)(\([^\(\)]+\))?)|(\([^\(\)]+\))|([^:\(]+))/,h=/(?:\\\/)|(?:\\\()|(?:\\\))/,c=dc.isComponent,p=dc.route,m=dc.txt,o=dc.Nothing,describe("route",function(){return describe("route regexp",function(){return it("should match paramName pattern",function(){var t;return t={},p._processPiecePatterns(":dsaf",t),u(t.dsaf).to.equal(!0,":dsaf"),p._processPiecePatterns(":$",t),u(t.$).to.equal(!0,":$"),p._processPiecePatterns(":_",t),u(t._).to.equal(!0,":_")}),it("should match cureved re",function(){var t,e;return t={},e=p._processPiecePatterns("(fd+=.)",t,2),u(e[0][0].key).to.equal(2,"(fd+=.)"),u(e[1]).to.equal(3,"(fd+=.)")}),it("should match param and string",function(){var t,e;return t={},e=p._processPiecePatterns(":a(dsaf)asdfj",t,2),u(e[0][0].key).to.equal("a"),u(e[1]).to.equal(2,"(fd+=.)")}),it("should match param and string 2",function(){var t,e;return t={},e=p._processPiecePatterns(":abc_$(dsaf)asdfj(&*^)+_",t,2),u(e[0][0].key).to.equal("abc_$"),u(e[1]).to.equal(3,"(fd+=.)")}),it("should match param and string 3",function(){var t,e;return t={},e=p._processPiecePatterns("_):_$a(dsaf)asdfj(&*^)+_",t,2),u(e[0][1].key).to.equal("_$a"),u(e[1]).to.equal(3,"(fd+=.)")}),it("should match param and string 3",function(){var t,e;return t={},e=p._processPiecePatterns("_):_$a(dsaf):b:c-asdfj(&*^)+_",t,2),u(e[0][1].key).to.equal("_$a"),u(e[1]).to.equal(3,"(fd+=.)")}),it("should throw while wrong paramName pattern",function(){return u(function(){var t;return p._processPiecePatterns(":",t={})}).to["throw"]()}),it("should throw while wrong paramName pattern 1",function(){return u(function(){var t;return p._processPiecePatterns(":+",t={})}).to["throw"]()}),it("should throw while wrong paramName pattern 2",function(){return u(function(){var t;return p._processPiecePatterns("(dfj()",t={})}).to["throw"]()}),it("should throw while wrong paramName pattern 3",function(){return u(function(){var t;return p._processPiecePatterns("()",t={})}).to["throw"]()}),it("should throw while wrong paramName pattern 4",function(){return u(function(){var t;return p._processPiecePatterns(":(dsaf)",t={})}).to["throw"]()}),it("should throw while wrong paramName pattern 5",function(){return u(function(){var t;return p._processPiecePatterns("(",t={})}).to["throw"]()})}),describe("test private function",function(){return it("should _getRoutePattern",function(){var t;return t=p._getRoutePattern("a/"),u(t.endSlash).to.equal(!0)}),it("should _processPatternRouteItem",function(){var t;return t=p._processRouteItem([{absolute:!0,segmentPatterns:[],baseIndex:0},function(){return 1}],"",0),u(!!t).to.equal(!0),u(t.text).to.equal(1)}),it("should _getRoutePattern and _processPatternRouteItem",function(){var t;return t=p._processRouteItem([p._getRoutePattern(""),function(){return m(1)}],"",0),u(!!t).to.equal(!0),u(t.text).to.equal(1)})}),describe("process route",function(){return it("should route 'a'",function(){var t,e;return t=p("a",function(){return 1}),t.getPath=function(){return"a"},u(!!(e=t.getContentComponent())).to.equal(!0),u(e.text).to.equal(1)}),it("should route 'a/b' on path 'a'",function(){var t,e;return t=p("a/b",function(){return 1}),t.getPath=function(){return"a"},u((e=t.getContentComponent())instanceof o).to.equal(!0)}),it("should not route 'a/' on path 'a'",function(){var t,e;return t=p("a/",function(){return 1}),t.getPath=function(){return"a"},u((e=t.getContentComponent())instanceof o).to.equal(!0)}),it("should not route 'a' on path 'a/'",function(){var t,e;return t=p("a",function(){return 1}),t.getPath=function(){return"a/"},u((e=t.getContentComponent())instanceof o).to.equal(!0)}),it("should route '*' on path 'a'",function(){var t,e;return t=p("*",function(t){return t.segments[0]}),t.getPath=function(){return"a"},u(!!(e=t.getContentComponent())).to.equal(!0),u(e.text).to.equal("a")}),it("should route '(w+)' on path 'a'",function(){var t,e;return t=p("(\\w+)",function(t){return t.items[0]}),t.getPath=function(){return"a"},u(!!(e=t.getContentComponent())).to.equal(!0),u(e.children[0].text).to.equal("a")}),it("should not route '*' on path 'a/'",function(){var t,e;return t=p("*",function(t){return 1}),t.getPath=function(){return"a/"},u((e=t.getContentComponent())instanceof o).to.equal(!0)}),it("should not route '*/' on path 'a'",function(){var t,e;return t=p("*/",function(){return 1}),t.getPath=function(){return"a"},u((e=t.getContentComponent())instanceof o).to.equal(!0)}),it("should route 'a/b'",function(){var t,e;return t=p("a/b",function(){return 1}),t.getPath=function(){return"a/b"},u(!!(e=t.getContentComponent())).to.equal(!0),u(e.text).to.equal(1)}),it("should route multi item",function(){var t,e;return t=p("a/1",function(){return 1},"a/2",function(){return 2}),t.getPath=function(){return"a/2"},u(!!(e=t.getContentComponent())).to.equal(!0),u(e.text).to.equal(2)}),it("should route multi item with otherwise",function(){var t,e;return t=p("a/1",function(){return 1},"a/2",function(){return 2},m("otherwise")),t.getPath=function(){return"a/otherwise"},u(!!(e=t.getContentComponent())).to.equal(!0),u(e.text).to.equal("otherwise")}),it("should route 'a/**' on path a/b",function(){var t,e;return t=p("a/**",function(){return 1}),t.getPath=function(){return"a/b"},u(!!(e=t.getContentComponent())).to.equal(!0),u(e.text).to.equal(1)}),it("should route 'a/*/**' on path a/b",function(){var t,e;return t=p("a/*/**",function(){return 1}),t.getPath=function(){return"a/b"},u(!!(e=t.getContentComponent())).to.equal(!0),u(e.text).to.equal(1)}),it("should route 'a/*/*/**' on path a/b",function(){var t,e;return t=p("a/*/*/**",function(){return 1}),t.getPath=function(){return"a/b"},u((e=t.getContentComponent())instanceof o).to.equal(!0)}),it("should route embedding route",function(){var t,e,n;return t=p("a/**",function(t,e){return e("b",function(){return 2})}),t.getPath=function(){return"a/b"},n=t.getContentComponent(),n.getPath=function(){return"a/b"},e=n.getContentComponent(),u(!!e).to.equal(!0),u(e.text).to.equal(2)})}),describe("multiple level route",function(){var t;return t=p("a/*/**",function(t,e){return e(1,function(){return 1},2,function(){return 2},3,function(){return 3},{otherwise:"otherwise 2"})},"b/**",function(){return"b/**"},{otherwise:"otherwise 1"}),it("should route a/b/3",function(){var e,n;return t.getPath=function(){return"a/b/3"},n=t.getContentComponent(),n.getPath=function(){return"a/b/3"},e=n.getContentComponent(),u(!!e).to.equal(!0),u(e.text).to.equal(3)}),it("should route b/2",function(){var e;return t.getPath=function(){return"b/2"},e=t.getContentComponent(),u(!!e).to.equal(!0),u(e.text).to.equal("b/**")}),it("should route not-found",function(){var e;return t.getPath=function(){return"not-found"},e=t.getContentComponent(),u(!!e).to.equal(!0),u(e.text).to.equal("otherwise 1")}),it("should route a/b/no-entry",function(){var e,n;return t.getPath=function(){return"a/b/no-entry"},n=t.getContentComponent(),n.getPath=function(){return"a/b/no-entry"},e=n.getContentComponent(),u(!!e).to.equal(!0),u(e.text).to.equal("otherwise 2")})}),describe("process route.to",function(){return it("should route.to",function(){return u(p._navigateTo("a/b/c","../x",2)).to.equal("a/x"),u(p._navigateTo("a/b/c","f",2)).to.equal("a/b/f"),u(p._navigateTo("a/b/c","/f",2)).to.equal("f"),u(p._navigateTo("a/b/c","/f/",2)).to.equal("f/"),u(p._navigateTo("a/b/c","./f/",2)).to.equal("a/b/f/")}),it("should route.to 2",function(){return u(p._navigateTo("a/b/c","../../f/",2)).to.equal("f/"),u(p._navigateTo("a/b/c","../../../f/",2)).to.equal("f/")})})})},function(t,e,n){var o,r,u,i,a,c,d,l,s,f,p,h,m,v,g,q,b,x,w,y,C,T,M,L,k,H,N,_,P,I,S,$;$=n(2),v=$.expect,y=$.iit,x=$.idescribe,k=$.nit,L=$.ndescribe,f=$.ddescribe,c=dc.bindings,h=dc.duplex,q=dc.flow,N=dc.see,l=dc.classFn,P=dc.styleFrom,g=dc.extendAttrs,u=dc.Tag,i=dc.Text,r=dc.List,o=dc.Component,M=dc.list,b=dc.func,w=dc.if_,S=dc.txt,a=dc.a,H=dc.p,_=dc.span,I=dc.text,T=dc.li,p=dc.div,d=dc.button,C=dc.input,m=dc.each,s=n(28),describe("demo",function(){return describe("sum",function(){return it("should construct and create components",function(){var t,e,n,o,r,u,i,a,d,l;return l=c({a:3,b:2}),t=l.a$,n=l.b$,e=l.a_,o=l.b_,i=I(t),a=I(n),d=H(S(u=q.add(e,o))),v(u()).to.equal(5,"sum 1"),e(1),v(u()).to.equal(3,"sum 2"),r=M(i,a,d),r.mount("#demo"),v(d.node.innerHTML).to.equal("3","mount"),i.node.value="3",a.node.value="4",i.node.onchange(),a.node.onchange(),v(e()).to.equal("3","a_"),v(o()).to.equal("4","b_"),v(u()).to.equal("34","sum"),v(!!r.valid).to.equal(!1,"comp.valid"),v(!!d.valid).to.equal(!1,"z.valid"),r.update(),v(d.node.innerHTML).to.equal("34","update")})}),describe("combobox",function(){return it("should process event property of child component",function(){var t,e,n;return n=0,e=p({},t=C({onmouseenter:function(){return n=1}}),p({},"wawa")),e.mount(),t.node.onmouseenter(),v(n).to.equal(1)}),it("should process event property of child component with model directive",function(){var t,e,n;return n=0,e=p({},t=C({$model:h({},"x"),onmouseenter:function(){return n=1}}),p({},"wawa")),e.mount(),t.node.onmouseenter(),v(n).to.equal(1)})}),describe("text model",function(){return it("should text model by value",function(){var t,e,n,o,r,u;return t=c(o={a:1}).a$,e={onchange:function(){return n.update()}},n=M(r=I(e,t),u=I(e,t)),n.mount(),r.node.value=3,r.node.onchange(),v(o.a).to.equal("3","m.a"),v(u.node.value).to.equal("3","text2.node.value")}),it("should text model by value and onchange",function(){var t,e,n,o,r,u;return t=c(o={a:1}).a$,e={value:t,onchange:function(){return t(this.value),n.update()}},n=M(r=I(e),u=I(e)),n.mount(),r.node.value=3,r.node.onchange(),v(o.a).to.equal("3","m.a"),v(u.node.value).to.equal("3","text2.node.value")})}),describe("combo",function(){return it("should combobox",function(){var t,e,n,o,r,u,i,a;return i=N(!1),e=null,a=N(""),u=function(){var t,n,r,u;for(r=[1,2],u=[],t=0,n=r.length;n>t;t++)o=r[t],u.push(function(t){return _({style:{display:"block",border:"1px solid blue","min-width":"40px"},onclick:function(){return a(t),e.update()}},t)}(o));return u}(),t=g(t,{onmouseleave:function(){return i(!1),e.update()}}),e=p(t,n=C({$model:a,onmouseenter:function(){return i(!0),e.update()}}),r=p({style:{display:q(i,function(){return i()?"block":"none"})}},u)),e.mount(),v(n.node.value).to.equal(""),v(i()).to.equal(!1),v(r.node.style.display).to.equal("none"),n.node.onmouseenter(),v(r.node.style.display).to.equal("block"),u[1].node.onclick(),v(n.node.value).to.equal("2")})}),describe("controls",function(){return it("should mount controls and others",function(){var t;return t=s(),t.mount("#demo"),v(t.node.length).to.equal(2),t.unmount()})}),describe("mount/unmount",function(){return it("should mount/unmount sub component",function(){var t,e,n;return n=p("toggle me"),t=M(p({onclick:function(){return n.mount()}},"mount",p({onclick:function(){return n.unmount()}},"unmount"))),e=M(t,n),n.mount(),n.unmount(),e.mount(),e.unmount()})}),describe("todomvc",function(){var t;return it("should process class",function(){var t;return t=a({className:{selected:1},href:"#/"}),t.mount("#demo"),v(t.node.className).to.equal("selected")}),it("should construct and create components",function(){var t;return t=T(a({className:{selected:1},href:"#/"},"All")),t.mount("#demo"),v(t.children[0].node.className).to.equal("selected"),v(t.children[0].node.href).to.match(/:\/\//)}),t=function(t,e){var n,o;return e.hash="all",n=function(){return"active"===e.hash?t.filter(function(t){return t&&!t.completed}):"completed"===e.hash?t.filter(function(t){return t&&t.completed}):t},o=m(n,function(t,e){return H(S(function(){return t.title}),", ",S(function(){return t.completed?"completed":"uncompleted"}))})},it("should mount getTodos and Each with empty todos correctly",function(){var e,n,o;return o=[],e=t(o,n={hash:"all"}),e.mount(),v(e.node.length).to.equal(0)}),it("should invalidate children to listComponent",function(){var e,n,o,r;return r=[{title:"do this"}],n=t(r,o={hash:"all"}),v(n.listComponent.invalidIndexes).to.be.undefined,n.getContentComponent(),e=n.cacheChildren[0],o.hash="completed",e.transfornValid=!0,n.getContentComponent(),e.valid=!0,o.hash="all",n.getContentComponent()}),it("should process getTodos and Each correctly",function(){var e,n,o,r;return r=[{title:"do this"}],n=t(r,o={hash:"all"}),n.mount(),v(n.node.length).to.equal(1),o.hash="completed",n.update(),v(n.node.length).to.equal(0),o.hash="all",n.getContentComponent(),e=n.listComponent.children[0],n.update(),v(n.node.length).to.equal(1)}),it("should todoEditArea",function(){var t,e,n,o,r,u;return n=dc.section,u=dc.ul,e=dc.footer,r=m([1,2],function(t,e){return T(1)}),t=o=n({id:"main"},u({id:"todo-list"},r),e({id:"footer"})),t.mount(),t.update()})})})},function(t,e){var n,o,r,u,i,a;u=dc.list,n=dc.a,r=dc.checkbox,a=dc.text,i=dc.p,o=dc.bindings,t.exports=function(){var t,e,n,i,c,d,l,s;return t=o({a:1}).a$,i=u(e=r(t),n=r(t)),s=u(d=a(t),l=a(t)),t(6),c=u(i,s),dc.updateWhen([e,n,d,l],"change",c),c}}]);